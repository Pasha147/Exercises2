var _class,_temp;function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,i=[],s=!0,r=!1;try{for(n=n.call(e);!(s=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);s=!0);}catch(e){r=!0,a=e}finally{try{s||null==n.return||n.return()}finally{if(r)throw a}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){r=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.assign(HTMLElement.prototype,{show:function(){return"none"===this.style.display&&(this.style.display=null),this.removeAttribute("hidden"),this.classList.remove("hidden"),this},hide:function(){return this.style.display="none",this},offsetRootTop:function(){return this.getBoundingClientRect().top+window.scrollY}}),window.km=(_temp=_class=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"new_el",value:function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}},{key:"is_touch_device",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}}]),e}(),_defineProperty(_class,"desktopHD",1921),_defineProperty(_class,"desktopBig",1450),_defineProperty(_class,"desktop",1200),_defineProperty(_class,"desktopSmall",1024),_defineProperty(_class,"tablet",850),_defineProperty(_class,"tabletSmall",600),_defineProperty(_class,"mobile",480),_defineProperty(_class,"mobileSmall",375),_defineProperty(_class,"layoutBreak",1024),_temp),window.$window=jQuery(window),window.$document=jQuery(document),window.$body=jQuery(document.body),window.kmcb={},window.kmjsdata=window.kmjsdata||{},window.js_l10n=function(e,t){return kmjsdata.jsl10n&&0!==Object.keys(kmjsdata.jsl10n).length?void 0===kmjsdata.jsl10n[e]?(console.log('NOTICE: JS translation of "'.concat(e,'" not found.')),e):kmjsdata.jsl10n[e]:e},document.addEventListener("DOMContentLoaded",(function(){window.kmodal.init(),window.myajax.init(),new kmcb.ajax_search_results,kmcb.scroll_top_button__init(),kmcb.tooltip__init(),new kmcb.kama_lightbox,kmcb.collapse_contents__init(),new kmcb.scroll_to_anchor,kmcb.sidebar_contents__init(),window.sb_fixable_block.init(),kmcb.chrome_bugfix__init(),document.addEventListener("ajax_re_ready",(function(){kmcb.link_blank_noopener_attr__init(),kmcb.spoiler__init(),kmcb.lozad__init()})),setTimeout((function(){return document.dispatchEvent(new Event("ajax_re_ready"))}),0),setInterval((function(){return document.dispatchEvent(new Event("interval_reset_vars"))}),4e3)})),window.kmColors=function(e){var t=getComputedStyle(document.body),n=[];return void 0===n[e]&&(n[e]=t.getPropertyValue(e)),n[e]},window.copyToClipboard=function(e){window.km_selection.elementText(e);try{document.execCommand("copy");if(e.classList.contains("hljs"))document.dispatchEvent(new CustomEvent("show_ads_on_code_copy",{detail:{el:e}}));else{var t=document.createElement("SPAN"),n={zIndex:999,display:"block",position:"absolute",padding:".6em 1em",marginTop:".7em",lineHeight:"1",fontFamily:"'Roboto Mono', consolas",borderRadius:"6px",background:"var(--bgColorInvDark4)",color:"var(--colorInvWhite90)",fontWeight:"normal"};for(var o in t.innerText="Copied",n)t.style[o]=n[o];e.after(t),setTimeout((function(){return t.remove()}),500)}e.style.opacity=.2,e.style.transition="opacity 100ms ease",setTimeout((function(){e.style.opacity=1}),100)}catch(e){console.log("Oops, unable to copy, "+e)}window.km_selection.remove()},kmcb.lozad__init=function(){lozad(".lozad",{loaded:function(e){document.dispatchEvent(new CustomEvent("lozad_el_loaded",{detail:e}))}}).observe()},window.sb_fixable_block={init:function(){if(!(window.innerWidth<800)){var e=jQuery(".sb_fixable_js:first");if(e.length){var t,n=jQuery(".footer:first"),o=50,a=o,i=$window.innerHeight();if(!(e.parent().innerHeight()-e.innerHeight()<150)){e.each((function(){var e=jQuery(this);this.fix={startY:null,endY:null,fixable_width:null,fixable_height:null,$parent_rel_el:null,interval:null};var t=this.fix,a=function(){if(e.length){i=$window.innerHeight();var a=e.prevAll(":not(style):not(script):first");a.length||(a=e.before("<div/>").prev()),t.startY=Math.ceil(a.offset().top+a.outerHeight(!0)-o),t.endY=n.offset().top,t.fixable_width=e.width(),t.fixable_height=e.outerHeight(!0),t.win_bigger_px=t.fixable_height-i,t.$parent_rel_el=window.sb_fixable_block.detect_relative_parent(e),t.parent_rel_el_offset_top=t.$parent_rel_el.offset().top,t.parent_rel_el_height=t.$parent_rel_el.outerHeight(!0)}};a(),document.addEventListener("interval_reset_vars",a)}));var s=function(){var n=document.documentElement.scrollTop,s=t-n;t=n;var r,l=_createForOfIteratorHelper(e);try{for(l.s();!(r=l.n()).done;){var c=r.value,d=jQuery(c),u=d.css("position"),p=c.fix,h=p.win_bigger_px+o>0,_=t+(h?i:p.fixable_height);if(t>p.startY&&_<p.endY)h&&((a+=s)>o?a=o:a<-p.win_bigger_px&&(a=-p.win_bigger_px),d.css({top:a+"px"})),"fixed"!==u&&d.css({position:"fixed",top:a+"px",width:p.fixable_width,display:"block"});else if(_>=p.endY){if("absolute"!==u){h&&(a=-p.win_bigger_px);var m=p.endY-p.parent_rel_el_offset_top-p.fixable_height;d.css({position:"absolute",top:m+"px",width:p.fixable_width})}}else"static"!==u&&(h&&(a=o),d.css({position:"static",top:"auto",width:"auto"}).data("pos",!1))}}catch(e){l.e(e)}finally{l.f()}};window.removeEventListener("scroll",s),t=document.documentElement.scrollTop,window.addEventListener("scroll",s),document.addEventListener("scroll_to_anchor__start",(function(){window.removeEventListener("scroll",s)})),document.addEventListener("scroll_to_anchor__end",(function(){t=document.documentElement.scrollTop,window.addEventListener("scroll",s)}))}}}},detect_relative_parent:function(e){var t=e.parent();return t.length?"relative"===t.css("position")?t:this.detect_relative_parent(t):null}},window.km_selection={remove:function(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},get:function(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection():document.selection?document.selection.createRange().text:void 0},elementText:function(e){var t;if(e instanceof jQuery&&(e=e[0]),"SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)e.focus(),e.setSelectionRange(0,e.value.length),t=e.value;else if(e.hasAttribute("contenteditable")&&e.focus(),document.createRange){var n=window.getSelection(),o=document.createRange();o.selectNodeContents(e),n.removeAllRanges(),n.addRange(o),t=n.toString()}else{var a=document.body.createTextRange();a.moveToElementText(e),a.select(),t=this.getText()}return t}},window.kmodal={wrapHtml:'\n\t\t<div class="kmodal__wrap">\n\t\t\t<div class="kmodal__overlay kmodal_close_js"></div>\n\t\t\t<div class="kmodal__body content">\n\t\t\t\t<div class="kmodal__body__inner"></div>\n\t\t\t\t<div class="kmodal__close-btn kmodal_close_js"><svg viewBox="0 0 50 50" style="height:1.2em; width:1.2em;" fill="currentColor"><path d="M 7.71875 6.28125 L 6.28125 7.71875 L 23.5625 25 L 6.28125 42.28125 L 7.71875 43.71875 L 25 26.4375 L 42.28125 43.71875 L 43.71875 42.28125 L 26.4375 25 L 43.71875 7.71875 L 42.28125 6.28125 L 25 23.5625 Z"/></svg></div>\n\t\t\t</div>\n\t\t</div>\n\t\t',$wrap:null,$close:null,$bodywr:null,$body:null,init:function(){var e=this,t=document.createElement("div");t.innerHTML=this.wrapHtml.trim(),this.wrap=t.firstChild,this.$wrap=jQuery(this.wrap),jQuery(document.body).append(this.$wrap),this.bodywr=this.wrap.querySelector(".kmodal__body"),this.body=this.wrap.querySelector(".kmodal__body__inner"),this.$bodywr=jQuery(this.bodywr),this.$body=jQuery(this.body),this.wrap.addEventListener("click",(function(e){e.target.closest(".kmodal_close_js")&&kmodal.hide()})),window.addEventListener("keyup",(function(t){"Escape"===t.code&&e.is_opened()&&kmodal.hide()}))},is_opened:function(){return!this.$wrap.is(":hidden")},show:function(){this.$wrap.fadeIn(200),this.$bodywr.width()<100?this.$bodywr.css({width:300,height:300}):this.$bodywr.css({height:this.$bodywr.outerHeight()});var e=myajax.$loader.clone();this.$body.append(e),e.wrap('<div class="kmodal__loader"></div>').show(),this.bodyFixer("fix");var t=new Event("kmodal_show");document.dispatchEvent(t)},hide:function(){var e=this;this.$body.scrollTop(0),this.$wrap.fadeOut(200,(function(){e.$body.html(""),e.$bodywr.css({width:0,height:0})})),this.bodyFixer("unfix");var t=new Event("kmodal_hide");document.dispatchEvent(t)},close:function(){this.hide()},content:function(e){this.show();var t=this.$bodywr,n=this.$body,o=t.outerWidth(),a=t.outerHeight();"string"==typeof e&&(e=/^\s*<[a-z]+/.test(e)?"<div>"+e+"</div>":'<div style="padding: 2rem 2.5rem">'+e+"</div>",e=jQuery(e)[0]),t.css({width:"auto",height:"auto"}),n.css({opacity:0}).empty().append(e);var i=t.outerWidth(),s=t.outerHeight();t.stop().css({width:o,height:a}).animate({width:i,height:s},200,(function(){t.css({height:"auto"}),n.css({opacity:1})}))},bodyFixer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"fix",t=document.body;if(!this.scrollWidth){var n=t.clientWidth;$body.css({overflow:"hidden"}),this.scrollWidth=t.clientWidth-n+"px",this.initialBodyMarginLeft=getComputedStyle(t).getPropertyValue("margin-left")}"fix"===e?(t.style.overflow="hidden",t.style["margin-right"]=this.scrollWidth):(t.style.overflow="auto",t.style["margin-right"]=this.initialBodyMarginLeft)}},$document.on("ajaxs_start",(function(e,t){t.noloader||t.action.match(/Userauth::/)||window.myajax.$loader.show()})),$document.on("ajaxs_done",(function(){return document.dispatchEvent(new Event("ajax_re_ready"))})),$document.on("ajaxs_always",(function(){return window.myajax.$loader.hide()})),window.myajax={hideTimeout:3500,msgTimeout:null,$msgboxWrap:'\n\t\t<div class="ajax-fixed">\n\t\t\t<div class="ajax-msgbox">\n\t\t\t\t<div class="hide-progress  progress-js"></div>\n\t\t\t\t<div class="close close-js" style="display:none;"><svg viewBox="0 0 50 50" style="height:1.2em; width:1.2em;" fill="currentColor"><path d="M 7.71875 6.28125 L 6.28125 7.71875 L 23.5625 25 L 6.28125 42.28125 L 7.71875 43.71875 L 25 26.4375 L 42.28125 43.71875 L 43.71875 42.28125 L 26.4375 25 L 43.71875 7.71875 L 42.28125 6.28125 L 25 23.5625 Z"/></svg></div>\n\t\t\t\t<div class="ajax-msg  msgbox-js" style="display:none;"></div>\n\t\t\t</div>\n\t\t</div>\n\t',$loader:'\n\t\t<div class="ajax-fixed">\n\t\t\t<div class="ajax-loader brakets" style="display:none;"><span>{</span><span>}</span></div>\n\t\t</div>\n\t',$msgbox:null,$progress:null,$close:null,init:function(){var e=this;this.$loader=jQuery(this.$loader).appendTo(document.body).find(".ajax-loader"),this.$msgboxWrap=jQuery(this.$msgboxWrap).appendTo(document.body),this.$msgbox=this.$msgboxWrap.find(".msgbox-js"),this.$progress=this.$msgboxWrap.find(".progress-js"),this.$close=this.$msgboxWrap.find(".close-js"),this.$close.on("click",(function(){return e.hideMsg()})),this.$msgboxWrap.on("pointerenter",(function(){e.clearTimeout()})).on("pointerleave",(function(){e.deferHideMsg(e.hideTimeout)}))},showMsg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;"object"==typeof e&&(t=e.success?"done":"error",e.type&&(t=e.type),e.hideTimeout&&(n=+e.hideTimeout),e=e.data),t||(t="done");var o={ok:"done",up:"done",updated:"done",success:"done",alert:"error",err:"error",warning:"warn",note:"info"};o[t]&&(t=o[t]),this.$msgbox.prev(".close-js").show(),this.$msgbox.show().html(e).removeClass("error warn info done").addClass(t),this.deferHideMsg(n)},deferHideMsg:function(e){var t=this;this.clearTimeout();var n=e||this.hideTimeout;setTimeout((function(){t.$progress.attr("style","width:0%; transition:width linear ".concat(n,"ms;"))}),1),this.msgTimeout=setTimeout((function(){return t.hideMsg()}),n)},hideMsg:function(){this.$close.fadeOut(100),this.$msgbox.fadeOut(100,(function(){jQuery(this).removeClass("error warn info done").html("")}))},clearTimeout:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){clearTimeout(this.msgTimeout),this.$progress.attr("style","")}))},kmcb.kama_lightbox=function(){function e(){_classCallCheck(this,e),_defineProperty(this,"wrapper_class","kama-lightbox"),_defineProperty(this,"loader_selector",""),_defineProperty(this,"scroll_close_distanse",300),_defineProperty(this,"anim_speed",300),_defineProperty(this,"transition","all ease-in ".concat(this.anim_speed,"ms")),_defineProperty(this,"css",{}),_defineProperty(this,"fake_css",{}),_defineProperty(this,"initial_css",{}),_defineProperty(this,"wrapper",null),_defineProperty(this,"container",null),_defineProperty(this,"initDOM",(function(){this.wrapper=this._elem('\n\t\t\t<div class="'.concat(this.wrapper_class,'" style="display:none">\n\t\t\t\t<div class="kama-lightbox__inner"></div>\n\t\t\t\t<div class="kama-lightbox__btn kama-lightbox__btn-prev"></div>\n\t\t\t\t<div class="kama-lightbox__btn kama-lightbox__btn-next"></div>\n\t\t\t</div>\n\t\t')),this.container=this.wrapper.querySelector(".kama-lightbox__inner"),this.prev=this.wrapper.querySelector(".kama-lightbox__btn-prev"),this.next=this.wrapper.querySelector(".kama-lightbox__btn-next"),this.loader_selector?(this.loader=document.querySelector(this.loader_selector).cloneNode(!0),this.loader.removeAttribute("hidden"),this.loader.classList.remove("hidden")):this.loader=this._elem('<div class="kama-lightbox__loader"></div>'),this.desc=this._elem('<div class="kama-lightbox__desc klb_desc_js"></div>'),this.fake=this._elem('<div class="kama-lightbox__inner --styiled --fake" style=" display:none; position:absolute; top:0; opacity:0;"></div>'),document.body.append(this.wrapper),document.body.append(this.fake)})),_defineProperty(this,"_elem",(function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstElementChild})),this.initDOM(),document.addEventListener("click",this),document.addEventListener("keyup",this),document.addEventListener("mousedown",this),document.addEventListener("mouseup",this),this.container.addEventListener("click",this);for(var t=0,n=["mouseup","mousedown","mousemove"];t<n.length;t++){var o=n[t];this.container.addEventListener(o,this)}}return _createClass(e,[{key:"handleEvent",value:function(e){"click"===e.type?e.currentTarget===this.container?this.zomm_in_out(e):this._skip_open||!this.open_on_click(e)&&this.is_opened()&&this.close_on_click(e):"keyup"===e.type&&this.is_opened()?this.on_key_press(e):"scroll"===e.type&&this.is_opened()?this.close_on_scroll(e):0===e.type.indexOf("mouse")&&(e.currentTarget===this.container?this.dragging(e):"mousedown"===e.type?(this._was_x=e.clientX,this._was_y=e.clientY):"mouseup"===e.type&&(this._skip_open=15<Math.abs(this._was_x-e.clientX)+Math.abs(this._was_y-e.clientY)))}},{key:"is_opened",value:function(){return this.wrapper&&"none"!==this.wrapper.style.display}},{key:"on_key_press",value:function(e){27===e.keyCode?this.close_lbox():39===e.keyCode?this.next.click():37===e.keyCode&&this.prev.click()}},{key:"open_on_click",value:function(e){var t=e.target.closest("a, [data-lightbox]");return!(!t||!(void 0!==t.dataset.lightbox||t.getAttribute("href")&&t.getAttribute("href").match(/^.*\.(png|jpe?g|gif|webp|svg|avif)/)))&&(e.preventDefault(),t.next_prev_el?t.next_prev_el.querySelector("img").click():this.open_lbox(t),!0)}},{key:"close_on_click",value:function(e){e.target.closest(".".concat(this.wrapper_class))||this.close_lbox()}},{key:"close_on_scroll",value:function(e){Math.abs(this.win_scrollY_on_open-window.scrollY)>this.scroll_close_distanse&&this.close_lbox()}},{key:"close_lbox",value:function(){var e=this;window.removeEventListener("scroll",this),Object.assign(this.container.style,this.initial_css);var t=this.container.querySelector(".klb_desc_js");t&&(t.style.display="none"),this.container.style.borderWidth=0,setTimeout((function(){e.wrapper.style.display="none",e.container.style.borderWidth=null}),this.anim_speed+10)}},{key:"open_lbox",value:function(e){var t=this;this.next_prev_links(e),this.win_scrollY_on_open=window.scrollY;var n=document.documentElement.scrollTop,o=window.innerHeight-20,a=document.body.clientWidth-20,i=(e.querySelector("img")||e).getBoundingClientRect();this.initial_css={top:"".concat(i.top+n,"px"),left:"".concat(i.left,"px"),width:"".concat(i.width,"px"),height:"".concat(i.height,"px")},this.wrapper.style.display="block",this.container.classList.remove("--styiled"),this.container.innerHTML="",Object.assign(this.container.style,_objectSpread(_objectSpread({},this.initial_css),{},{transition:"none"})),this.container.append(this.loader);var s='<img src="'.concat(e.getAttribute("href"),'" alt="">').concat(this.get_desc_html(e));this.fake.style.display=null,this.fake.innerHTML=s,window.imagesLoaded(this.fake,(function(){window.addEventListener("scroll",t);var e=t.fake,i=e.querySelector("img"),r=e.querySelector(".klb_desc_js");i.style.maxWidth="none",i.style.maxHeight="none",r&&(r.style.maxWidth="".concat(i.clientWidth,"px"));var l=e.offsetWidth,c=e.offsetHeight;t.fake_css={width:"".concat(l,"px"),height:"".concat(c,"px")},t.css={transition:t.transition,cursor:"initial",left:"".concat((a-l)/2,"px"),top:"".concat((o-c)/2+n,"px"),width:"".concat(l,"px"),height:"".concat(c,"px")},l>a&&(t.css.cursor="zoom-in",t.css.left="".concat(10,"px"),t.css.width="".concat(a,"px"),e.style.width="".concat(a,"px"),i.style.maxWidth="100%",c=e.offsetHeight,e.style.width="auto",i.style.maxWidth="none",t.css.height="".concat(c,"px"),t.css.top="".concat((o-c)/2+n,"px")),c>o&&(window.removeEventListener("scroll",t),t.css.top="".concat(n+10,"px"),t.css.height="".concat(c,"px")),e.style.display="none",t.container.innerHTML=s,t.container.classList.add("--styiled"),Object.assign(t.container.style,t.css)}))}},{key:"zomm_in_out",value:function(e){var t="zoom-in"===this.container.style.cursor,n="zoom-out"===this.container.style.cursor;if(t||n)if(t){for(var o=0,a=["left","top","width","height"];o<a.length;o++){var i=a[o];this.css[i]=this.container.style[i]}window.removeEventListener("scroll",this),Object.assign(this.container.style,_objectSpread(_objectSpread({},this.fake_css),{},{cursor:"zoom-out"}))}else window.addEventListener("scroll",this),Object.assign(this.container.style,_objectSpread(_objectSpread({},this.css),{},{cursor:"zoom-in"}))}},{key:"next_prev_links",value:function(e){var t=e.dataset.lbset;if(!t&&e.firstElementChild&&(t=e.firstElementChild.dataset.lbset),t){var n=_toConsumableArray(document.querySelectorAll('a[data-lbset="'.concat(t,'"]')));n.length||(n=_toConsumableArray(document.querySelectorAll('img[data-lbset="'.concat(t,'"]'))).map((function(e){return e.closest("a")})));for(var o=n.map((function(e){return e.getAttribute("href")})).indexOf(e.getAttribute("href")),a=0,i=[this.prev,this.next];a<i.length;a++){var s=i[a],r=s.getAttribute("class").includes("prev")?o-1:o+1;void 0!==n[r]?(s.dataset.lightbox="1",s.style.display="block",s.next_prev_el=n[r]):s.style.display="none"}}else this.next.style.display="none",this.prev.style.display="none"}},{key:"get_desc_html",value:function(e){var t=e.getAttribute("title"),n=e.getAttribute("href"),o=e.querySelector("img");if(o&&(n=o.getAttribute("src"),t||(t=o.dataset.desc||o.getAttribute("title")||o.getAttribute("alt"))),!t){var a=e.parentElement.querySelector(".wp-caption-text");a&&(t=a.innerHTML)}if(!t)return"";var i=n.match(/[/]([^/]+)\.(?:png|jpe?g|gif|webp)/);return i&&(i=i[1]),t===i?"":(this.desc.innerHTML=t,this.desc.outerHTML)}},{key:"dragging",value:function(e){var t=this,n=this.container;if("mousedown"===e.type)n.setAttribute("draggable","false"),n.querySelector("img").setAttribute("draggable","false"),this.listen_mousemove=!0,this._drag={x:e.offsetX,y:e.offsetY,type:n.style.cursor,posxy:e.pageX+e.pageY,inited:!1},Object.assign(n.style,{cursor:"grabbing",transition:"none"});else if(this.listen_mousemove&&"mousemove"===e.type){if(!this._drag.inited&&Math.abs(e.pageX+e.pageY-this._drag.posxy)<10)return this._drag.x=e.offsetX,void(this._drag.y=e.offsetY);this._drag.inited=!0,n.style.left="".concat(e.pageX-this._drag.x,"px"),n.style.top="".concat(e.pageY-this._drag.y,"px")}else"mouseup"===e.type&&(this.listen_mousemove=!1,n.style.cursor=this._drag.type,n.style.transition=this.transition,this._drag.inited&&(this.container.removeEventListener("click",this),setTimeout((function(){return t.container.addEventListener("click",t)}),50)))}}]),e}(),kmcb.collapse_contents__init=function(){var e,t=document.querySelectorAll(".kamatoc-wrap__title"),n="contents_collapse",o={attr:'style="width:1em; height:1em; vertical-align: middle; margin-left:.2em;" viewBox="0 0 24 24" fill="currentColor"',show:'<svg {attr}><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14l-6-6z"/></svg>',hide:'<svg {attr}><path d="M24 24H0V0h24v24z" fill="none" opacity=".87"/><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"/></svg>',elem:function(e){return km.new_el(o[e].replace("{attr}",o.attr))}},a=function(e,t){e.lastElementChild&&e.lastElementChild.remove(),"hide"===t?e.append(o.elem("show")):e.append(o.elem("hide"))},i=_createForOfIteratorHelper(t);try{for(i.s();!(e=i.n()).done;){var s=e.value;s.style.cursor="pointer",s.innerText=s.innerText.replace(":","").trim(),a(s,"hide"),s.addEventListener("click",(function(e){var t=e.currentTarget,o=t.parentElement.querySelector(".kamatoc_js");o.offsetWidth>0||o.offsetHeight>0?jQuery(o).slideUp((function(){t.classList.add("collapsed"),a(t,"show"),window.localStorage.setItem(n,"1")})):jQuery(o).slideDown((function(){t.classList.remove("collapsed"),a(t,"hide"),window.localStorage.removeItem(n)}))})),"1"===window.localStorage.getItem(n)&&(a(s,"show"),s.parentElement.querySelector(".kamatoc_js").style.display="none")}}catch(e){i.e(e)}finally{i.f()}},kmcb.sidebar_contents__init=function(){var e=document.querySelector(".kamatoc");if(e){var t=document.querySelector(".sidebar");if(t){var n=jQuery(t),o=jQuery(e),a="";a="TABLE"===e.nodeName?o.find("td:nth-child(1) > a").clone().wrap("<li></li>").parent().wrapAll("<div></div>").parent().html():e.innerHTML;var i=n.find("> :not(style):not(script):last"),s=km.new_el('<div class="sb-contents-wrap" style="top:'.concat(0,'px; margin-bottom:1.5em;">\n\t\t\t<ul class="sb-block sb-contents" style="margin-bottom:0;">').concat(a,"</ul>\n\t\t</div>"));s.style.width="".concat(i.outerWidth(),"px"),t.querySelector(".sb_fixable_js").append(s);var r,l,c=_toConsumableArray(s.querySelectorAll('a[href^="#"]')).reverse(),d=jQuery(".article-text"),u=function(){r=d.offset().top+d.outerHeight();var e,t=_createForOfIteratorHelper(c);try{for(t.s();!(e=t.n()).done;){var n=e.value,o=n.getAttribute("href").replace(/^.*#/,""),a=document.querySelector('.kamatoc-anchor[name="'.concat(o,'"]'));if(!a)return;n.dataset.top_offset=jQuery(a).offset().top-100}}catch(e){t.e(e)}finally{t.f()}};u(),document.addEventListener("interval_reset_vars",u),window.addEventListener("scroll",(function(e){clearTimeout(l),l=setTimeout((function(){var e,t=document.documentElement.scrollTop,n=_createForOfIteratorHelper(c);try{for(n.s();!(e=n.n()).done;){e.value.classList.remove("current")}}catch(e){n.e(e)}finally{n.f()}if(t<r){var o,a=_createForOfIteratorHelper(c);try{for(a.s();!(o=a.n()).done;){var i=o.value;if(t>i.dataset.top_offset){i.classList.add("current");break}}}catch(e){a.e(e)}finally{a.f()}}}),50)}))}}},kmcb.tooltip__init=function(){var e=null,t=null,n={maxWidth:null,borderWidth:null,padding:null},o=!1,a={sum:0,x:0,y:0},i=!1,s=0,r=0;function l(e){e=this,i&&(e.pageX+e.pageY===a.sum?o=!0:d())}function c(o){var r=function(e){for(var t=!1,n=1;n<=3;n++){if(e.matches("[title], [data-title]")){t=e;break}if(!e.parentElement)break;e=e.parentElement}return(!t||!t.matches(".smiles_button, .no_tooltip, .disable_tooltip, iframe"))&&t}(this.target);if(r&&(clearTimeout(s),i!==r)){i=r;var l=r.getAttribute("title")||r.getAttribute("data-title");l&&(function(){if(t)return;e=jQuery('<div class="tooltip"/>').appendTo(document.body),t=e[0];for(var o=window.getComputedStyle(t),a=0,i=["maxWidth","borderWidth","padding"];a<i.length;a++){var s=i[a];n[s]=o[s]}}(),function(o,i){o.removeAttribute("title"),o.setAttribute("data-title",i);var s=o.dataset.tooltip_pos||"",r=o.dataset.tooltip_max_width||n.maxWidth,l=o.dataset.tooltip_type||"",c=document.createElement("DIV");c.appendChild(document.createTextNode(i)),i=c.innerHTML,"pre"===l?(i="<pre>"+(i=i.replace(/\[(\/)?STRONG]/g,"<$1strong>"))+"</pre>",r="100%"):i=i.trim().replace(/\n/g,"<br>");t.innerHTML=i;var d=window.innerWidth,u=window.innerHeight,p={maxWidth:r,left:0,top:0};for(var h in p)t.style[h]=p[h];t.style.display="block";var _=t.offsetWidth,m=t.offsetHeight;d<=_&&(t.style.maxWidth="98%",_=t.offsetWidth,m=t.offsetHeight);t.style.display="none";var f=20,v=d-f-a.x,g=d-(v+f+f),y=u-f-(a.y-window.scrollY),w=u-(y+f+f);t.style.top=y<m&&w<m?window.scrollY+10+"px":"top"===s||y<m?a.y-m-f+"px":a.y+f+"px";t.style.left=v<_&&g<_?"1%":v<_?a.x-_-f+"px":a.x+f+"px";e.slideDown(100)}(r,l))}}function d(){t&&(e.stop(!0,!0),t.style.display="none",t.style.maxWidth=n.maxWidth),i=!1}document.addEventListener("mousemove",(function(e){o&&Math.abs(a.sum-(e.pageX+e.pageY))>4&&(o=!1,d());a.sum=e.pageX+e.pageY,a.x=e.pageX,a.y=e.pageY})),document.body.addEventListener("mouseover",(function(e){clearTimeout(r),r=setTimeout(c.bind(e),70)})),document.body.addEventListener("mouseout",(function(e){clearTimeout(s),s=setTimeout(l.bind(e),90)}))};var kamaSmoothScroll=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"scroll",value:function(e){var t=this,n=Object.assign({goto:0,duration:400,element:document.documentElement,easing:"easeOutCirc",onScrollStart:function(){return null},onScrollEnd:function(){return null},onScroll:function(){return null},frames:null},e),o=n.frames||Math.round(e.duration/15),a=n.element.scrollTop,i=Date.now(),s=n.duration/o;this.ticktm&&clearTimeout(this.ticktm),n.onScrollStart(),function e(){var o=Math.min((Date.now()-i)/n.duration,1);n.element.scroll({top:t.easingFuncs[n.easing](o,a,n.goto-a,1)}),n.onScroll(),1===o?n.onScrollEnd():t.ticktm=setTimeout(e,s)}()}}]),e}();function hljs_init(){var e=document.querySelectorAll("pre");e.length&&lozad(e,{load:highlight_single_elem}).observe()}function highlight_single_elem(e){if(!e.matches('[data-hljsdone], .none, [class*="editor"]')){var t=jQuery,n=t(e),o=window.innerWidth>window.km.layoutBreak&&!window.km.is_touch_device(),a=document.createElement("span");a.setAttribute("class",e.getAttribute("class")),a.innerHTML=e.innerHTML,a.style.display="block";var i,s=t(a);e.removeAttribute("class"),e.setAttribute("data-hljsdone","1"),e.innerHTML="",e.append(a),window.hljs.highlightElement(a),function(){if(!o||a.classList.contains("no_right_roll_js"))return void(a.style.overflowX="auto");s.on("mouseenter",(function(t){e.dataset.preWidth||(s.css({display:"inline-block"}),e.dataset.preWidth=n.width(),e.dataset.inWidth=s.width(),s.css({display:"block"}));var o=+e.dataset.preWidth,a=+e.dataset.inWidth;o>a||(e.dataset.stopExpand="",e.dataset.rightExpanded||setTimeout((function(){if(!e.dataset.stopExpand&&"collapsed"!==n.find("+ .expand_code_js:first").data("status")&&n.width()!==a&&(n.stop().animate({width:a+"px"},700,"swing",(function(){return e.dataset.rightExpanded="1"})),!e.dataset.closestBg)){for(var t=e,o=1;!e.dataset.closestBg||"rgba(0, 0, 0, 0)"===e.dataset.closestBg||e.dataset.closestBg.split(",").length-1==3;){if(15==o++){e.dataset.closestBg="rgba(255, 0, 0, 0)";break}t=t.parentNode,e.dataset.closestBg=window.getComputedStyle(t).backgroundColor}e.style.backgroundColor=e.dataset.closestBg,!e.dataset.darkswinchedset&&(e.dataset.darkswinchedset="1")&&document.addEventListener("theme-color-switched",(function(){e.dataset.closestBg="",e.style.backgroundColor=null}))}}),100))})),s.on("mouseleave",(function(t){e.dataset.stopExpand="1";var o=t,a=$window.width()-s.offset().left,i=$window.height();o.clientX>=a||o.clientY>=i||n.data("inWidth")>a&&$document.scrollTop()+o.clientY>=s.offset().top||(e.dataset.rightExpanded="",n.stop().animate({width:n.data("preWidth")+"px"},700))}))}(),function(){if(!a.classList.contains("hide"))return;var e=s.outerHeight();if(e>200){var i='<i class="dashicons dashicons-arrow-down-alt2"></i>',r=t('<button type="button" class="expand-code / expand_code_js" data-status="collapsed">'+js_l10n("развернуть","js")+"<br>"+i+"</button>");r[0].dataset.alter_text="".concat(i.replace("down","up"),"<br>").concat(js_l10n("свернуть","js")),n.after(r),n.css({"margin-bottom":0}),s.css({height:50,overflow:"hidden"}),r.on("click",(function(){var i=t(this).data("alter_text"),l=t(this).data("status");r.data("status","collapsed"===l?"expanded":"collapsed"),s.trigger("mouseenter"),"expanded"===l&&(t("html:first, body:first").animate({scrollTop:$window.scrollTop()-(n.height()-50)},300),s.trigger("mouseleave"));var c="collapsed"===l?e:50;s.animate({height:c},300,(function(){r.data("alter_text",r.html()).html(i),o||(a.style.overflow="collapsed"===l?"auto":"hidden")}))}))}}(),function(){if(a.classList.contains("no_click_select_js"))return;var e,t;s.on("mousedown",(function(){clearTimeout(e),t=window.km_selection.get()})),s.on("mouseup",(function(){var n=this;t||(t=window.km_selection.get()),t||(e=setTimeout((function(){window.km_selection.elementText(n)}),250))}))}(),function(){if(!a.classList.contains("ruller")&&!e.dataset.startline)return;a.classList.remove("ruller");var t=a.innerText.match(/\n/g),o=+e.dataset.startline||1;if(t){n.css({"line-height":n.css("line-height")});var i=km.new_el('<span class="ruller"></span>');i.style.paddingTop=parseFloat(n.css("padding-top"))+1+"px";for(var s=t.length,r="",l=o;l<=s+o;l++)r+='<span id="L'+l+'">'+l+"</span>";i.innerHTML=r,a.after(i),n.css({"border-left":"0px"});var c=parseInt(n.css("padding-left")),d=parseInt(i.getBoundingClientRect().width);d+5>c&&n.css("padding-left",d+5+"px"),i.addEventListener("click",(function(e){var t=e.target;t.id&&(location.hash=t.id)}))}}(),(i=get_svg("copy",{attr:'data-tooltip_pos="top"',title:js_l10n("Копировать в буфер","js")})).classList.add("hljs-copy-btn"),i.onclick=function(e){return window.copyToClipboard(e.currentTarget.parentElement.querySelector(".hljs"))},e.prepend(i),document.dispatchEvent(new CustomEvent("hljs_pre_done",{detail:{pre:e}}))}}_defineProperty(kamaSmoothScroll,"ticktm",null),_defineProperty(kamaSmoothScroll,"easingFuncs",{easeLinear:function(e,t,n,o){return n*e/o+t},easeInSine:function(e,t,n,o){return-n*Math.cos(e/o*(Math.PI/2))+n+t},easeInCubic:function(e,t,n,o){return n*(e/=o)*e*e+t},easeInExpo:function(e,t,n,o){return 0===e?t:n*Math.pow(2,10*(e/o-1))+t},easeOutSine:function(e,t,n,o){return n*Math.sin(e/o*(Math.PI/2))+t},easeOutCubic:function(e,t,n,o){return-n*(e/=o)*(e-2)+t},easeOutExpo:function(e,t,n,o){return e===o?t+n:n*(1-Math.pow(2,-10*e/o))+t},easeOutCirc:function(e,t,n,o){return n*Math.sqrt(1-(e=e/o-1)*e)+t}}),kmcb.scroll_top_button__init=function(){var e=jQuery(document.body),t=jQuery(document.querySelector(".mainbox"));t.length||(t=e);var n=0,o=0,a=0,i=jQuery('\n\t\t<span class="scroll-top" data-hidden="1">\n\t\t\t<button class="up dashicons dashicons-arrow-up-alt2"></button>\n\t\t\t<button class="remember">●</button>\n\t\t</span>');e.append(i);var s=i.find(".dashicons"),r=i.find(".remember"),l=t.offset().left+(t.width()/2-s.width()/2);i.css({left:l});var c=function(){s.hasClass("down")&&s.removeClass("dashicons-arrow-down-alt2 down").addClass("dashicons-arrow-up-alt2 up")};r.on("click",(function(){(n=n?0:$window.scrollTop())?r.addClass("active"):r.removeClass("active")})),s.on("click",(function(e){if(e.preventDefault(),e.target!==r[0]){n||(o*=-1);var t=$window.scrollTop()===Math.abs(o)?0:Math.abs(o),i=jQuery("html:first, body:first").stop();Math.abs(t)>1200&&i.scrollTop(Math.abs(t-1200)),i.animate({scrollTop:t},200),clearTimeout(a),n||(a=setTimeout((function(){o=Math.abs(o)}),1e4))}})),$window.on("scroll.top",(function(){if(window.outerWidth<700)return i.hide().data("hidden",1),!0;var e=$window.scrollTop();n?o=n:(o>=0||e>Math.abs(o))&&(o=e),e>300?i.data("hidden")&&i.show().data("hidden",0).animate({bottom:0},100):o||i.data("hidden")||i.data("hidden",1).animate({bottom:-40},100,(function(){return i.hide()})),o&&Math.abs(o)>e?s.hasClass("up")&&s.removeClass("dashicons-arrow-up-alt2 up").addClass("dashicons-arrow-down-alt2 down"):c()})),$window.trigger("scroll.top")},kmcb.scroll_to_anchor=function(){function e(){_classCallCheck(this,e),_defineProperty(this,"bumper",50),document.addEventListener("click",this.handle_click.bind(this))}return _createClass(e,[{key:"handle_click",value:function(e){var t=e.target.closest('a[href*="#"]');if(t){var n=t.getAttribute("href").replace(/#.*/,"");if(!(t.onclick||n&&location.href.replace(/#.*/,"")!==n)){var o=t.hash.replace(/#/,""),a=document.body;if(!o||(a=document.querySelector("#".concat(o,', a[name="').concat(o,'"]')))){e.preventDefault();var i=document.documentElement.scrollTop+a.getBoundingClientRect().top-this.bumper,s={link:t,goto:i};kamaSmoothScroll.scroll({goto:i,duration:200,element:document.documentElement,easing:"easeOutCirc",onScrollStart:function(){document.dispatchEvent(new CustomEvent("scroll_to_anchor__start",{detail:s}))},onScrollEnd:function(){window.history.replaceState(null,document.title,"#".concat(o)),document.dispatchEvent(new CustomEvent("scroll_to_anchor__end",{detail:s}))}})}}}}}]),e}(),kmcb.ajax_search_results=function(){function e(){if(_classCallCheck(this,e),_defineProperty(this,"mainSelector",".head_search_js"),_defineProperty(this,"mainEl",null),_defineProperty(this,"sinput",null),_defineProperty(this,"remove",null),_defineProperty(this,"ajaxRes",null),_defineProperty(this,"resultHTML",""),this.mainEl=document.querySelector(this.mainSelector),this.mainEl){this.sinput=this.mainEl.querySelector(".sinput_js"),this.sinput.setAttribute("autocomplete","off"),this.$search=jQuery(this.mainEl),this.ajaxRes=window.km.new_el('<div class="tsearch-res"></div>'),this.$ajaxRes=jQuery(this.ajaxRes),this.remove=this.mainEl.querySelector(".remove"),this.mainEl.append(this.ajaxRes),this.ajaxRes.style.top=this.$search.position().top+this.$search.outerHeight(!0)+10+"px",this.ajaxRes.style.right="1rem";for(var t=0,n=["keyup","change","click"];t<n.length;t++){var o=n[t];this.sinput.addEventListener(o,this.searchHandler.bind(this))}this.sinput.addEventListener("keydown",this.keypressHandler.bind(this)),this.clearField(),this.closeSearchResults(),this.showResultsOnFocus(),window.innerWidth>850&&this.fixSearchOnScroll()}}return _createClass(e,[{key:"showResultsOnFocus",value:function(){var e=this;this.sinput.addEventListener("focus",(function(t){e.resultHTML&&e.sinput.value&&"none"===e.ajaxRes.style.display&&e.showResult()}))}},{key:"searchHandler",value:function(e){var t=this;if("Enter"!==e.key&&"ArrowUp"!==e.key&&"ArrowDown"!==e.key){var n=e.target;this.loupeEl=n.closest(this.mainSelector).querySelector(".loupe");var o=n.value,a=0;if("keyup"===e.type&&(a=1e3),!o)return this.remove.hide(),void clearTimeout(this.timeout);this.remove.show(),this.inputVal===o||o.length<3||(this.inputVal=o.trim(),this.loupeEl.classList.add("searching"),clearTimeout(this.timeout),this.timeout=setTimeout((function(){ajaxs("ajaxs_fast_search",{text:o,NO_WP_LOAD:1,noloader:1}).done((function(e){t.resultHTML=e,t.showResult()})).always((function(){t.loupeEl.classList.remove("searching")}))}),a))}}},{key:"keypressHandler",value:function(e){if("Enter"===e.key){var t=this.$ajaxRes.find("li.active a").attr("href");t&&(window.location.href=t,e.preventDefault())}if("ArrowUp"===e.key||"ArrowDown"===e.key){var n,o=this.$ajaxRes.find("li.active");"ArrowDown"===e.key&&(n=o.length&&o.next("li").length?this.$ajaxRes.find("li.active").next("li"):this.$ajaxRes.find("li:first")),"ArrowUp"===e.key&&(n=o.length&&o.prev("li").length?this.$ajaxRes.find("li.active").prev("li"):this.$ajaxRes.find("li:last")),n.length&&n.addClass("active").siblings().removeClass("active")}}},{key:"closeSearchResults",value:function(){var e=this;this.mainEl.addEventListener("keydown",(function(t){"Escape"===t.key&&e.ajaxRes.hide()})),document.addEventListener("click",(function(t){!t.target.closest(e.mainSelector)&&e.ajaxRes.hide()}))}},{key:"clearField",value:function(){var e=this;this.remove.addEventListener("mouseup",(function(t){clearTimeout(e.timeout),e.loupeEl.classList.remove("searching"),e.$ajaxRes.hide(),t.target.closest("form").querySelector(".sinput_js").value="",e.sinput.focus(),e.remove.hide()}))}},{key:"autoFocusOnHover",value:function(){var e,t=this;this.mainEl.addEventListener("mouseover",(function(n){clearTimeout(e),e=setTimeout((function(){t.sinput.focus()}),200)})),this.mainEl.addEventListener("mouseout",(function(t){clearTimeout(e)}))}},{key:"showResult",value:function(){this.$ajaxRes.show().html(this.resultHTML);var e=$window.height()-80;this.ajaxRes.style.maxHeight=e+"px"}},{key:"fixSearchOnScroll",value:function(){var e=jQuery('<div class="fixed-search"></div>').appendTo(document.body),t=jQuery('<span id="tsearchplace"></span>');this.$search.before(t);var n={position:this.$search.css("position"),width:this.$search.css("width")},o={position:this.$ajaxRes.css("position"),top:this.$ajaxRes.css("top"),right:this.$ajaxRes.css("right")},a=function(){var a=$window.scrollTop();a>60&&e.is(":hidden")?(e.append(this.$search.css({position:"static",width:"100%"})).show(),this.$ajaxRes.css({position:"fixed",top:"3.5rem",right:10})):a<60&&!e.is(":hidden")&&(e.hide(),t.after(this.$search.css(n)),this.$ajaxRes.css(o))}.bind(this);a(),window.addEventListener("scroll",a)}}]),e}(),kmcb.link_blank_noopener_attr__init=function(){var e,t=window.location.hostname,n=_createForOfIteratorHelper(document.querySelectorAll("a[href]"));try{for(n.s();!(e=n.n()).done;){var o=e.value,a=o.getAttribute("href");/noopener/.test(o.getAttribute("rel"))||/^\s?(\/|#|javascript)/.test(a)||new RegExp(t.replace(".",".")).test(a)||(o.getAttribute("target")||(o.setAttribute("target","_blank"),o.setAttribute("rel","".concat(o.getAttribute("rel")||""," noopener noreferrer"))))}}catch(e){n.e(e)}finally{n.f()}},kmcb.spoiler__init=function(){jQuery(".c_box_spoiler:not(.spoilerInited)").each((function(){var e=jQuery(this),t=jQuery('<div class="expander" data-collapse_text="'.concat(js_l10n("свернуть","js"),' ▴" data-expand_text="').concat(js_l10n("развернуть","js"),' ▾">').concat(js_l10n("развернуть","js")," ▾</div>"));e.addClass("spoilerInited"),e.after(t),e.css({height:"5em"});var n=e.height();t.on("click",(function(){var t=jQuery(this);if(e.height()>n){var o=jQuery(window).scrollTop(),a=e.height()-n;jQuery("html,body").animate({scrollTop:o-a},200),e.css({overflow:"hidden"}).animate({height:n},200),t.text(t.data("expand_text"))}else e.css({height:"auto",overflow:"visible"}),t.text(t.data("collapse_text"))}))}))},kmcb.chrome_bugfix__init=function(){/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)&&document.addEventListener("keydown",(function(e){if("TEXTAREA"===e.target.nodeName&&"Enter"===e.key&&!e.target.dataset.enter_bugfix_off){var t=e.target,n=t.scrollTop,o=window.scrollY;setTimeout((function(){t.scrollTop-n>30&&(t.scrollTop=n,console.log("textarea.scrollTop was returned after jump")),window.scrollY!==o&&(window.scrollTo(0,o),console.log("window scrollY was returned after jump"))}),0)}}))},window.kmContAutosave={save_key:"seved_post_content",autoseve_interval:1e4,max_seve_num:10,_interval:null,_kmodal_hide_run_inited:null,run:function(e){this._interval?console.log("already runed kmContAutosave"):(this._interval=setInterval(e,this.autoseve_interval),console.log("run kmContAutosave"))},stop:function(){clearInterval(this._interval),this._interval=null,console.log("stop kmContAutosave")},show_diff_modal:function(e,t,n){var o=this.changed_data(e,t);if(o){this.stop();var a={saved_content:o.content,texarea_content:t.val(),title:js_l10n("Найдены сохраненые изменения контента.","js")};return ajaxs("ajaxs_get_content_diff",a,(function(e){kmodal.content(e),jQuery("#use_saved_content_btn_js").on("click",(function(){t.val(o.content),kmodal.close()}))})),this._kmodal_hide_run_inited||(this._kmodal_hide_run_inited=1,$document.on("kmodal_hide",(function(){kmContAutosave.run(n)}))),!0}return!1},save_autosave:function(e,t,n){this._get_single_data(e)&&!this.changed_data(e,t)||this._save_single_data(e,n)},changed_data:function(e,t){var n=this._get_single_data(e);return!(!n||n.content.trim()===t.val().trim())&&n},del_single_data:function(e){var t=this._get_all_data();delete t[this._generate_key(e)],this._save_all_data(t)},_get_single_data:function(e){return this._get_all_data()[this._generate_key(e)]||null},_save_single_data:function(e,t){var n=this._generate_key(e),o=this._get_all_data();delete o[n];var a={};for(var i in a[n]=t,o)i.match(/^[0-9]+$/)&&(i=this._generate_key(i)),a[i]=o[i];this._save_all_data(a)},_get_all_data:function(){return JSON.parse(localStorage.getItem(this.save_key)||"{}")},_save_all_data:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++)t+1>this.max_seve_num&&delete e[n[t]];localStorage.setItem(this.save_key,JSON.stringify(e))},_generate_key:function(e){return"_"+e}},window.insertToTextarea=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=n.selectionStart,i=n.selectionEnd,s=n.value;if(n.selectionStart||0===n.selectionStart){var r=e+s.substring(a,i)+t;if(n.value=s.substring(0,a)+r+s.substring(i,s.length),o)n.selectionStart=a+e.length,n.selectionEnd=i+e.length;else{var l=a+(a===i?e.length:r.length);n.selectionStart=n.selectionEnd=l}}else n.value+=e+t;n.focus(),n.dispatchEvent(new CustomEvent("on_insert_to_textarea",{detail:{prev_selectionStart:a,prev_selectionEnd:i,prev_content:s,new_selectionStart:n.selectionStart,new_selectionEnd:n.selectionEnd,new_content:n.value,textarea:n}})),n.dispatchEvent(new Event("input"))},document.addEventListener("DOMContentLoaded",(function(){km.wpkamaAddEditor(document.querySelectorAll(".wpkama_editor_autoinit_js"))})),km.kmeditor={hotkeysData:{},allBtns:{strong:{text:'<span class="dashicons dashicons-editor-bold"></span>',open:"**",close:"**",hotkey:"ctrl+b"},em:{text:'<span class="dashicons dashicons-editor-italic"></span>',open:"*",close:"*",hotkey:"ctrl+i"},a:{text:'<span class="dashicons dashicons-admin-links"></span>',hotkey:"ctrl+k | alt+a"},img:{text:'<span class="dashicons dashicons-format-image"></span>',hotkey:"alt+y"},img_full:{text:'<span class="dashicons dashicons-format-image"></span>',hotkey:"alt+y"},ul:{text:"ul",open:"\n* ",close:"\n"},ol:{text:"ol",open:"\n1. ",close:"\n"},h3:{text:"H3",open:"\n### "},h4:{text:"H4",open:"\n#### "},h5:{text:"H5",open:"\n##### "},blockquote:{text:'<span class="dashicons dashicons-editor-quote"></span>',open:"\n> ",close:"\n\n",hotkey:"alt+q"},code:{text:"`"+js_l10n("стр","js"),open:"`",close:"`",title:js_l10n("Код в строке (заменяет HTML сущности)","js"),hotkey:"alt+1"},var:{text:"``"+js_l10n("стр","js"),open:"``",close:"``",title:js_l10n("Выделение в строке (заменяет html сущности)","js"),hotkey:"alt+2"},pre:{text:"```"+js_l10n("код","js"),open:"\n```\n",close:"\n```\n",title:js_l10n("Многострочный код (заменяет html сущности, подсвечивает синтаксис)","js"),hotkey:"alt+3"},pre_php:{text:"```php",open:"\n```php\n",close:"\n```\n",title:js_l10n("PHP код","js"),hotkey:"alt+4"},note:{text:"[note]",open:"\n____c_box_note\n",close:"\n____\n",title:js_l10n('Блок "Заметка"',"js"),hotkey:"alt+5"},info:{text:"[info]",open:"\n____c_box_info\n",close:"\n____\n",title:js_l10n('Блок "Информация"',"js"),hotkey:"alt+7"},important:{text:"[imp]",open:"\n____c_box_important\n",close:"\n____\n",title:js_l10n('Блок "Важно"',"js"),hotkey:"alt+8"},spoil:{text:"[spoil]",open:"\n____c_box_spoiler\n",close:"\n____\n",title:js_l10n('Блок "свернуть/развернуть - споилер"',"js")},indent:{text:"[⟾]",open:"\n____c_box_indent\n",close:"\n____\n",title:js_l10n("Отступ слева","js")},btn:{text:"[btn]",open:'\n[text_btn url="" text="" class="" wrclass=""]\n'},rus_quote:{text:"«»",open:"«",close:"»"},parametrs:{text:'<span class="dashicons dashicons-list-view"></span>',open:"\n\n$_____ *"+js_l10n("(строка/массив/число/объект/логический) (обязательный)","js")+"*\n:\t_____\n\t*"+js_l10n("По умолчанию","js")+": _____*\n\n$_____ *"+js_l10n("(строка/массив/число/объект/логический) (обязательный)","js")+"*\n:\t_____\n\t*"+js_l10n("По умолчанию","js")+": _____*\n\n",title:js_l10n("Параметры","js")},table:{text:"Table",title:"Таблица",open:"\n\n_____\t\t|\t___\t\t|\t________\t|\t________\n--------\t|\t---\t\t|\t--------\t|\t--------\n__\t\t\t|\t___\t\t|\t____\t\t|\t_____\n__\t\t\t|\t___\t\t|\t____\t\t|\t_____\n__\t\t\t|\t___\t\t|\t____\t\t|\t_____\n__\t\t\t|\t___\t\t|\t____\t\t|\t_____\n\n"},coredata_content:{text:"Coredata Content",title:"Content of current described function/hook",open:"asdasd"}},btnClick:function(){var e=jQuery(this),t=e.data("tag")||!1,n=e.data("open"),o=e.data("close")||"",a=jQuery(e.parent().nextAll("textarea:first")[0]||e.parent().parent().nextAll("textarea:first")[0]);if("a"===t){var i=a[0],s=function(e,t){var n=e.value.substring(e.selectionStart,e.selectionEnd);if(n){var o=e.value.substring(0,e.selectionStart),a=e.value.substring(e.selectionEnd,e.value.length),i=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s=new RegExp("".concat(i,"[(){}]*$")).exec(o+n);if(s){var r=s[0];o=(o+n).slice(0,-r.length),e.value=o+n+a,e.selectionStart=o.length,e.selectionEnd=e.selectionStart+n.length}}};if(!window.kmodal.is_opened()){var r=km.kmeditor.aModalEl;r||(r=km.kmeditor.aModalEl=km.new_el('\n\t\t\t\t\t\t<form class="kmeditor-amodal">\n\t\t\t\t\t\t\t<p>{desc_text}</p>\n\t\t\t\t\t\t\t<p><input class="kmeditor-amodal__input url_input_js" placeholder="http://"></p>\n\t\t\t\t\t\t\t<div class="kmeditor-amodal__btns">\n\t\t\t\t\t\t\t\t<button type="submit" class="button-primary">{button_text}</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t\t'.replaceAll("{desc_text}",js_l10n("Введите URL","js")).replaceAll("{button_text}",js_l10n("Вставить","js")))).addEventListener("submit",(function(e){e.preventDefault(),kmodal.hide();var t=e.currentTarget,a=t.the_textarea,i=t.querySelector(".url_input_js").value;s(a,i);var r=location.href.match(/^https?:\/\/([^.]+[.][^/]+)/)[1];i=i.replace(new RegExp("^(https?://)?"+r),""),n="[",o="]("+i+")",window.insertToTextarea(n,o,a)})),kmodal.show({maxWidth:600}),kmodal.content(r),r.querySelector(".url_input_js").value="",r.querySelector(".url_input_js").focus(),r.the_textarea=i;var l=i.value.substring(i.selectionStart,i.selectionEnd);return void(l&&ajaxs("ajaxs_find_funchook_url",{selected_text:l},(function(e){e&&e.length&&(r.querySelector(".url_input_js").value=e[0],r.querySelector(".url_input_js").focus())})))}var c=prompt(js_l10n("Введите URL","js"),"http://");if(!c)return!1;s(i,c);var d=location.href.match(/^https?:\/\/([^.]+[.][^/]+)/)[1];c=c.replace(new RegExp("^(https?://)?"+d),""),n="[",o="]("+c+")"}if("img"!==t)if("coredata_content"!==t)if("img_full"!==t){if("preview"===t){var u=a.next(".editor_preview");u.length||(u=jQuery('<div class="article-text editor_preview" style="margin:1em 0;"></div>'),a.after(u)),e.data("preview_active")?(e.data("preview_active",!1),u.remove(),a.show().css({opacity:1}),e.find(">*").addClass("dashicons-visibility").removeClass("dashicons-hidden")):(a.css({opacity:.5}),e.data("preview_active",!0),ajaxs("ajaxs_text_preview",{kses_type:"comment"===a.data("kses_type")?"comment":"post",text:a.val()},(function(t){u.html(t),a.hide(),e.find(">*").removeClass("dashicons-visibility").addClass("dashicons-hidden")})))}else n||(n="<".concat(t,">"),o="</".concat(t,">"));window.insertToTextarea(n,o,a[0])}else window.imgUpload.showPopup(a,!0);else ajaxs("ajaxs_coredata_get_content",{coredata_item_id:document.querySelector("#coredata_item_id_js").value},(function(e){return kmodal.content(e)}));else window.imgUpload.showPopup(a)},_hotkeysDataFill:function(){var e=this;if(!Object.keys(this.hotkeysData).length)for(var t={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90},n=function(){var n=_slicedToArray(a[o],2),i=n[0],s=n[1];if(void 0===s.hotkey)return"continue";s.hotkey.split("|").forEach((function(n){var o=n.trim().split("+"),a=o.pop();e.hotkeysData[n]={btnname:i,baze:o,keyCode:t[a]}}))},o=0,a=Object.entries(this.allBtns);o<a.length;o++)n()},hotkeys:function(e,t){e.addEventListener("keydown",(function(n){if(e===document.activeElement){var o=["alt","ctrl","shift"].filter((function(e){return n["".concat(e,"Key")]}));if(o.length){km.kmeditor._hotkeysDataFill();for(var a=0,i=Object.entries(km.kmeditor.hotkeysData);a<i.length;a++){var s=_slicedToArray(i[a],2),r=(s[0],s[1]);n.keyCode===r.keyCode&&(r.baze.sort().join("-")===o.sort().join("-")&&(n.preventDefault(),t.find('> [data-tag="'+r.btnname+'"]').trigger("click")))}}}}))},keyPressHandler:function(e){e.addEventListener("keydown",(function(t){var n=e.selectionStart!==e.selectionEnd,o={"`":"`","'":"'","(":")","[":"]","{":"}",_:"_","*":"*","<":">"};Object.keys(o).includes(t.key)&&n&&(t.preventDefault(),window.insertToTextarea(t.key,o[t.key],e,!0))}))}},km.wpkamaAddEditor=function(e){void 0===e.length&&(e=[e]);var t,n=_createForOfIteratorHelper(e);try{var o=function(){var e=t.value,n=e,o=jQuery(e),a=o.data("buttons").split(/[, ]+/),i=o.data("buttons-class")?o.data("buttons-class").replace(/[^a-z_-]/gi,""):"qted-buttons",s=jQuery('<div class="'.concat(i,'"></div>')),r=jQuery('<div class="qted-wrap"></div>');if(o.parent().hasClass("qted-wrap"))return"continue";n.addEventListener("on_insert_to_textarea",(function(e){})),km.kmeditor.hotkeys(n,s),km.kmeditor.keyPressHandler(n),o.after(r),r.append(s),r.append(o),window.TxtPreview(r[0],"");var l,c=_createForOfIteratorHelper(a);try{for(c.s();!(l=c.n()).done;){var d=l.value,u=km.kmeditor.allBtns[d]||!1;if(u){var p=jQuery("<span>".concat(u.text,"</span>")).attr("data-tag",d);u.open&&p.attr("data-open",u.open),u.close&&p.attr("data-close",u.close);var h=u.hotkey||"";u.title?p.attr("title",h?u.title+" ("+h+")":u.title):h&&p.attr("title",u.hotkey),s.append(p)}}}catch(e){c.e(e)}finally{c.f()}s.on("click","[data-tag]",km.kmeditor.btnClick),$window.on("scroll.editor",(function(e){jQuery.contains(document.documentElement,s[0])||$window.off(e);var t=o.height(),n=o.offset().top-s.height(),a=$document.scrollTop(),i=s.css("position");a>n&&a<t+n?"fixed"!==i&&(s.before(jQuery("<div/>").css({height:s.height()})),s.css({position:"fixed",top:0,"z-index":1})):"relative"!==i&&(s.prev().remove(),s.css({position:"relative",top:"auto","z-index":"auto"}))})),setTimeout((function(){return $window.trigger("scroll.editor")}),1e3)};for(n.s();!(t=n.n()).done;)o()}catch(e){n.e(e)}finally{n.f()}return e},jQuery((function(e){var t=e(".wpfunctions");if(t.length&&t.hasClass("roll_it_js")){var n="▾",o=function(t,o){o.each((function(){var o=e(this),a=o.parent().next("ul"),i="up"===t;a.length&&(i?a.hide():a.show()),o.text(i?n:"▴").data("alttext",i?"▴":n)}))};t.find(".title + ul").each((function(){var t=e(this).parent().find(".sub_title:first");t.length&&e(this).before(t.clone().html("<span>...</span>"))})),t.find(".title, .sub_title").append('<div class="roller" data-alttext="▾">▴</div>'),t.on("click.roll",".roller",(function(t,a){var i=e(this),s=i.parent();if(s.hasClass("title")){a||(a=i.text()===n?"down":"up"),o(a,i);var r=s.parent().find(".sub_title .roller");r.length&&o(a,r)}else s.hasClass("sub_title")&&(a||(a=i.text()===n?"down":"up"),o(a,i))})),document.querySelector(".roll_all_btn_js").addEventListener("click",(function(e){var n=e.currentTarget,o=t.find(".title .roller"),a=n.dataset.down_text,i=n.dataset.up_text;n.innerText.toLowerCase()===i.toLowerCase()?(o.trigger("click.roll","up"),n.innerText=a):(o.trigger("click.roll","down"),n.innerText=i)}))}})),hljs.registerLanguage("plain",(function(){return{name:"Plain text",aliases:["plaintext","text","txt"],disableAutodetect:!0}})),hljs.registerLanguage("html",(function(e){return{subLanguage:"xml",contains:[{begin:/<\?(php)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0}]}]}})),hljs.registerLanguage("xml",(function(e){var t={className:"symbol",begin:"&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;"},n={begin:"\\s",contains:[{className:"meta-keyword",begin:"#?[a-z_][a-z1-9_-]+",illegal:"\\n"}]},o=e.inherit(n,{begin:"\\(",end:"\\)"}),a=e.inherit(e.APOS_STRING_MODE,{className:"meta-string"}),i=e.inherit(e.QUOTE_STRING_MODE,{className:"meta-string"}),s={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:"[A-Za-z0-9\\._:-]+",relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[t]},{begin:/'/,end:/'/,contains:[t]},{begin:/[^\s"'=<>`]+/}]}]}]};return{aliases:["rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,contains:[{className:"meta",begin:"<![a-z]",end:">",relevance:10,contains:[n,i,a,o,{begin:"\\[",end:"\\]",contains:[{className:"meta",begin:"<![a-z]",end:">",contains:[n,o,i,a]}]}]},e.COMMENT("\x3c!--","--\x3e",{relevance:10}),{begin:"<\\!\\[CDATA\\[",end:"\\]\\]>",relevance:10},t,{className:"meta",begin:/<\?xml/,end:/\?>/,relevance:10},{className:"tag",begin:"<style(?=\\s|>|$)",end:">",keywords:{name:"style"},contains:[s],starts:{end:"</style>",returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:"<script(?=\\s|>|$)",end:">",keywords:{name:"script"},contains:[s],starts:{end:"<\/script>",returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:"</?",end:"/?>",contains:[{className:"name",begin:/[^\/><\s]+/,relevance:0},s]}]}})),hljs.registerLanguage("php",(function(e){var t={className:"variable",begin:"\\$+[a-zA-Z_-ÿ][a-zA-Z0-9_-ÿ]*(?![A-Za-z0-9])(?![$])"},n={className:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?[=]?/},{begin:/\?>/}]},o={className:"subst",variants:[{begin:/\$+[a-zA-Z_][a-zA-Z0-9_]*(?:->[\w]+|\[[^\]\n]+\])?/},{begin:/\{\$/,end:/\}/}]},a=e.inherit(e.APOS_STRING_MODE,{illegal:null}),i=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(o)}),s={begin:/<<<['"]?\w+['"]?$/,end:/^\w+;?$/,contains:e.QUOTE_STRING_MODE.contains.concat(o)},r={className:"string",contains:[e.BACKSLASH_ESCAPE,n],variants:[e.inherit(a,{begin:"b'",end:"'"}),e.inherit(i,{begin:'b"',end:'"'}),i,a,s]},l={className:"number",variants:[{begin:"\\b0b[01]+(?:_[01]+)*\\b"},{begin:"\\b0o[0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0x[\\da-f]+(?:_[\\da-f]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:e[+-]?\\d+)?"}],relevance:0},c={keyword:"function __CLASS__ __DIR__ __FILE__ __FUNCTION__ __LINE__ __METHOD__ __NAMESPACE__ __TRAIT__ die echo exit include include_once print require require_once array abstract and as binary bool boolean break callable case catch class clone const continue declare default do double else elseif empty enddeclare endfor endforeach endif endswitch endwhile eval extends final finally float for foreach from global goto if implements instanceof insteadof int integer interface isset iterable list new object or private protected public real return string switch throw trait try unset use var void while xor yield",literal:"false null true",built_in:"Error|0 AppendIterator ArgumentCountError ArithmeticError ArrayIterator ArrayObject AssertionError BadFunctionCallException BadMethodCallException CachingIterator CallbackFilterIterator CompileError Countable DirectoryIterator DivisionByZeroError DomainException EmptyIterator ErrorException Exception FilesystemIterator FilterIterator GlobIterator InfiniteIterator InvalidArgumentException IteratorIterator LengthException LimitIterator LogicException MultipleIterator NoRewindIterator OutOfBoundsException OutOfRangeException OuterIterator OverflowException ParentIterator ParseError RangeException RecursiveArrayIterator RecursiveCachingIterator RecursiveCallbackFilterIterator RecursiveDirectoryIterator RecursiveFilterIterator RecursiveIterator RecursiveIteratorIterator RecursiveRegexIterator RecursiveTreeIterator RegexIterator RuntimeException SeekableIterator SplDoublyLinkedList SplFileInfo SplFileObject SplFixedArray SplHeap SplMaxHeap SplMinHeap SplObjectStorage SplObserver SplObserver SplPriorityQueue SplQueue SplStack SplSubject SplSubject SplTempFileObject TypeError UnderflowException UnexpectedValueException ArrayAccess Closure Generator Iterator IteratorAggregate Serializable Throwable Traversable WeakReference Directory __PHP_Incomplete_Class parent php_user_filter self static stdClass"};return{aliases:["php","php3","php4","php5","php6","php7"],case_insensitive:!0,keywords:c,contains:[e.HASH_COMMENT_MODE,e.COMMENT("//","$",{contains:[n]}),e.COMMENT("/\\*","\\*/",{contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.COMMENT("__halt_compiler.+?;",!1,{endsWithParent:!0,keywords:"__halt_compiler",lexemes:e.UNDERSCORE_IDENT_RE}),n,{className:"keyword",begin:/\$this\b/},t,{begin:/(::|->)+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/},{className:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{className:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:c,contains:["self",t,e.C_BLOCK_COMMENT_MODE,r,l]}]},{className:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"use",relevance:0,end:";",contains:[e.UNDERSCORE_TITLE_MODE]},r,l,{className:"symbol",begin:"!=|!==|!|===|==|=|%|&|\\*|\\+|,|-|:|;|~|<=|<|=>|>|\\.|\\?|\\[|\\]|\\{|\\}|\\(|\\)|\\^|\\|",relevance:0}]}})),hljs.registerLanguage("php_light",(function(e){var t={className:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?[=]?/},{begin:/\?>/}]},n=e.inherit(e.APOS_STRING_MODE,{illegal:null}),o=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains}),a={begin:/<<<['"]?\w+['"]?$/,end:/^\w+;?$/,contains:e.QUOTE_STRING_MODE.contains},i={className:"string",contains:[e.BACKSLASH_ESCAPE,t],variants:[e.inherit(n,{begin:"b'",end:"'"}),e.inherit(o,{begin:'b"',end:'"'}),o,n,a]};return{aliases:[],case_insensitive:!0,keywords:{keyword:"function __CLASS__ __DIR__ __FILE__ __FUNCTION__ __LINE__ __METHOD__ __NAMESPACE__ __TRAIT__ die echo exit include include_once print require require_once array abstract and as binary bool boolean break callable case catch class clone const continue declare default do double else elseif empty enddeclare endfor endforeach endif endswitch endwhile eval extends final finally float for foreach from global goto if implements instanceof insteadof int integer interface isset iterable list new object or private protected public real return string switch throw trait try unset use var void while xor yield",literal:"false null true",built_in:"Error|0 AppendIterator ArgumentCountError ArithmeticError ArrayIterator ArrayObject AssertionError BadFunctionCallException BadMethodCallException CachingIterator CallbackFilterIterator CompileError Countable DirectoryIterator DivisionByZeroError DomainException EmptyIterator ErrorException Exception FilesystemIterator FilterIterator GlobIterator InfiniteIterator InvalidArgumentException IteratorIterator LengthException LimitIterator LogicException MultipleIterator NoRewindIterator OutOfBoundsException OutOfRangeException OuterIterator OverflowException ParentIterator ParseError RangeException RecursiveArrayIterator RecursiveCachingIterator RecursiveCallbackFilterIterator RecursiveDirectoryIterator RecursiveFilterIterator RecursiveIterator RecursiveIteratorIterator RecursiveRegexIterator RecursiveTreeIterator RegexIterator RuntimeException SeekableIterator SplDoublyLinkedList SplFileInfo SplFileObject SplFixedArray SplHeap SplMaxHeap SplMinHeap SplObjectStorage SplObserver SplObserver SplPriorityQueue SplQueue SplStack SplSubject SplSubject SplTempFileObject TypeError UnderflowException UnexpectedValueException ArrayAccess Closure Generator Iterator IteratorAggregate Serializable Throwable Traversable WeakReference Directory __PHP_Incomplete_Class parent php_user_filter self static stdClass"},contains:[e.HASH_COMMENT_MODE,e.COMMENT("//","$",{contains:[t]}),e.COMMENT("/\\*","\\*/",{contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.COMMENT("__halt_compiler.+?;",!1,{endsWithParent:!0,keywords:"__halt_compiler",lexemes:e.UNDERSCORE_IDENT_RE}),{className:"keyword",begin:/\$this\b/},{begin:/(::|->)+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"use",relevance:0,end:";",contains:[e.UNDERSCORE_TITLE_MODE]},i,{className:"number",variants:[{begin:"\\b0b[01]+(?:_[01]+)*\\b"},{begin:"\\b0o[0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0x[\\da-f]+(?:_[\\da-f]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:e[+-]?\\d+)?"}],relevance:0}]}})),hljs.configure({classPrefix:"lang-"}),document.addEventListener("ajax_re_ready",hljs_init);var addComment={moveForm:function(e,t,n){var o,a=this,i=a.getEl(e),s=a.getEl(n),r=a.getEl("cancel-comment-reply-link"),l=a.getEl("comment_parent");if(i&&s&&r&&l){a.respondId=n,a.getEl("comm-respond-placeholder")||((o=document.createElement("div")).id="comm-respond-placeholder",s.before(o));var c=i.parentElement.querySelector(".children");return c||(c=km.new_el('<ul class="children"></ul>'),i.after(c)),c.prepend(s),l.value=t,r.style.display=null,r.removeAttribute("hidden"),r.onclick=function(){a.getEl("comment_parent").value="0";var e=a.getEl("comm-respond-placeholder");return e.before(s),e.remove(),r.style.display="none",!1},a.getEl("comment").focus(),!1}},getEl:function(e){return document.getElementById(e)}};if(window.TxtPreview=function(e,t){var n,o,a,i,s=e.querySelector("textarea");if((null===(n=e.nextElementSibling)||void 0===n||!n.classList.contains("ajax-txt-preview"))&&((i=e.parentElement.querySelector(".preview_btn_js"))||(i=null===(o=e.parentElement.parentElement)||void 0===o?void 0:o.querySelector(".preview_btn_js")),i)){var r=km.new_el('<div class="ajax-txt-preview '+t+'" style="display:none;"></div>');e.after(r),i.addEventListener("click",(function(t){var n=i.innerHTML,o=i.querySelector(".dashicons");i.classList.contains("active")?(i.classList.remove("active"),o?(o.classList.remove("dashicons-hidden"),o.classList.add("dashicons-visibility")):i.innerHTML=n.replace("✗ ",""),function(){if("none"!==e.style.display)return;var t=window.scrollY-r.offsetRootTop();t<0&&(t=0);var n=t/r.clientHeight;e.show(),r.hide(),$window.scrollTop(e.offsetRootTop()),s.scrollTop=s.scrollHeight*n}(),a&&a.abort()):(i.classList.add("active"),o?(o.classList.add("dashicons-hidden"),o.classList.remove("dashicons-visibility")):i.innerHTML="✗ "+n,s.style.opacity="0.2",s.style.transition="opacity 200ms",a=ajaxs("ajaxs_text_preview",{text:s.value,kses_type:s.dataset.kses_type||"comment"},(function(t){var n;r.innerHTML='<div class="cont">'+t+"</div>",n=s.scrollTop/s.scrollHeight,r.show(),r.style["min-height"]=e.clientHeight,r.style.opacity="0.5",r.style.transition="opacity 200ms",setTimeout((function(){r.style.opacity="1"}),200),e.hide(),$window.scrollTop(r.offsetRootTop()+r.clientHeight*n)})).always((function(){return setTimeout((function(){return s.style.opacity="1"}),200)})))}))}},jQuery((function(e){var t=e("#respond:first"),n=t.find("textarea:first");if(n.length&&window.autosize(n),!document.location.href.match(/question/)){var o=e("#comment"),a=e(".commentlist:first"),i=e('<div class="bquote_button" style="position:absolute; display:none; z-index:30;">'+js_l10n("Вставить цитату","js")+"</div>").appendTo(document.body),s=0,r=0;e(document.body).on("mousemove",(function(e){s=e.pageX,r=e.pageY}));var l=0,c=0;o.on("click keyup",(function(){l=this.selectionStart,c=this.selectionEnd})),i.on("click",(function(){i.hide();var t=o.val(),n="\n> "+e(this).attr("text")+"\n\n";o.val(t.substring(0,l)+n+t.substring(c,t.length)).focus();var a=l+n.length;o[0].selectionStart=a,o[0].selectionEnd=a,o[0].dispatchEvent(new Event("input"))})),a.on("mouseup",".comment-text",(function(e){if(i.hide(),!e.target.tagName.match(/textarea|span|pre/i)){var t=window.km_selection.get();t&&i.css({top:r-45,left:s-85}).fadeIn(200).attr("text",t)}}))}var d=e(".filter_comment_btn_js:first"),u=d.find("> :not([data-type])"),p=e("ul.commentlist").parent();u.hide(),d.find("> *").on("click",(function(){var t=e(this);ajaxs("type_comments_show",{post_id:d.attr("data-post-id"),condition:e(this).attr("data-type")},(function(e){u.show(),t.addClass("active").siblings().removeClass("active"),p.html(e)}))}));var h=t.find(".textarea-wrap");h.length&&window.TxtPreview(h[0],"comment-text text"),km.wpkamaAddEditor(t.find('textarea[name="comment"]'));var _=e(".commentform-inputs"),m=_.find(".comm_fields_js"),f=_.find(".hello_user_hideable"),v=_.find(".unlogged_author_name_js"),g=m.find('input[name="author"]').val();v.on("click",(function(){m.toggle(150)})),g&&(m.hide(),v.text(g).css({"border-bottom":"1px dashed #666",cursor:"pointer"})),_.hasClass("logged")||g||f.hide(),window.ajax_delete_comment=function(t){var n=e(t).closest('[id *="comment-"]'),o=n.attr("id").match(/comment-([0-9]+)/)[1];return o?(ajaxs("fast_delete_comment",{com_id:o},(function(e){e.success?n.parent().attr("id")==="li-comment-"+o?n.parent().remove():n.remove():myajax.showMsg(e)})),!1):(alert("error: comemnt id for del not detected..."),!1)},$document.on("click",".edit_comment_btn_js",(function(t){t.preventDefault();var n=e(this).closest('[id^="comment-"]'),o=n.attr("id").match(/[0-9]+/)[0],a=n.find(".comm-text-js:first"),i=a.html(),s=n.find(".comm-meta-js:first"),r=e(".ajax_qt_editor:first").clone(!0,!0).show();ajaxs("ajaxs_get_comment_text",{comment_id:o},(function(t){if(t.success){var n=e('<button class="button" style="margin-right:.3em;">'+js_l10n("Сохранить","js")+"</button>"),l=e('<button class="button preview-btn preview_btn_js" style="margin-right:.3em;">'+js_l10n("Предпросмотр","js")+"</button>"),c=e('<button class="button">'+js_l10n("Отменить","js")+"</button>");c.on("click",(function(){a.html(i),s.show()})),s.hide(),r.val(t.data),a.html(r).append(n,l,c),km.wpkamaAddEditor(r),r.height(r[0].scrollHeight),r.focus(),n.on("click",(function(){ajaxs("save_comment_text",{comment_id:o,comment_text:r.val()},(function(e){e.success?(a.html(e.data),s.show()):myajax.showMsg(e)}))}))}else myajax.showMsg(t)}))})),window.commentFormSubmit=function(){var t=this,n=t.dataset.formtype;ajaxs("ajaxs_post_comment",{form:t,formtype:n},(function(n){if(n.success){var o,a=n.data;if(a.depth>0){var i=t.closest(".comment"),s=i.querySelector(".children");document.querySelector("#cancel-comment-reply-link").dispatchEvent(new Event("click")),s?s.innerHTML+=a.html:i.innerHTML+='<ul class="children">'+a.html+"</ul>"}else e(".commentlist").append(a.html);var r=document.querySelector("#li-comment-"+a.comment_ID);setTimeout((function(){r.style.opacity="0",r.style.transition="opacity 800ms",setTimeout((function(){return r.style.opacity="1"}),800),window.scrollTo({top:r.offsetRootTop()-100,behavior:"smooth"})}),20),null===(o=t.querySelector(".preview_btn_js.active"))||void 0===o||o.dispatchEvent(new Event("click")),t.querySelector('textarea[name="comment"]').value=""}else myajax.showMsg(n)}))}})),"function"==typeof isAdsoff){var sapecalm=Cookies.get(kmjsdata.spdelcook),setcookie__fn=function(){Cookies.set(kmjsdata.spdelcook,1,{expires:365,path:"/"})};if(!sapecalm){var selectors=".sb-contents li, .kamatoc li, .tsearch-res li";document.addEventListener("onsite_time_tick",(function(e){e.detail.total_time>1200&&setcookie__fn()})),document.addEventListener("click",(function(e){if(e.target.closest(selectors)){setcookie__fn();var t,n=_createForOfIteratorHelper(document.querySelectorAll(".spads"));try{for(n.s();!(t=n.n()).done;){t.value.remove()}}catch(e){n.e(e)}finally{n.f()}}}))}if(isAdsoff()){var _step10,_iterator10=_createForOfIteratorHelper(document.querySelectorAll('div[id^="addd"], div[class^="addd"], .addd_placeholder'));try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _el2=_step10.value;_el2.remove()}}catch(e){_iterator10.e(e)}finally{_iterator10.f()}if(!document.body.classList.contains("user-adminor")){var _step11,_iterator11=_createForOfIteratorHelper(document.querySelectorAll(".spads"));try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var el=_step11.value;el.remove()}}catch(e){_iterator11.e(e)}finally{_iterator11.f()}}}else!function(e,t,n){n=e.getElementsByTagName("script")[0],(t=e.createElement("script")).src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",t.type="text/javascript",t.async=!0,n.parentNode.insertBefore(t,n)}(document)}window.ads_place_replace=function(e){if(document.body.classList.contains("adsoff"))return e;var t=document.querySelector("#google_ads_tpl");return t&&(e=e.replace("\x3c!--ads place--\x3e",t.innerHTML.replace("margin:1.5em auto;","margin:1em;"))),e},document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".addd_placeholder").forEach((function(e){lozad(e,{load:function(e){var t,n;if(!isAdsoff()){var o=e.dataset.ads_html||document.querySelector("#google_ads_tpl").innerHTML,a=km.new_el(o);jQuery(e).before(a),a.setAttribute("style",(null!==(t=a.getAttribute("style"))&&void 0!==t?t:"")+" "+(null!==(n=e.getAttribute("style"))&&void 0!==n?n:"")),e.remove()}}}).observe()}))})),document.addEventListener("DOMContentLoaded",(function(){var e=jQuery,t={ads_showing:!1,ads_back_timeout:null,ads_back_timeout_time:5e3,is_show_ads:function(){return 1===Math.floor(3*Math.random())+1},code_copy_ads_trigger:function(n){var o=t;if(!o.ads_showing&&o.is_show_ads()){var a,i,s,r=e("article .adsbygoogle"),l={};if(r.length)if(r=r.eq((s=+(s=r.length),Math.floor(Math.random()*(s-1+1))+1-1)),n.closest("article").length){o.ads_showing=1;var c=n.closest("pre");setTimeout((function(){l={position:r.css("position"),top:r.css("top"),left:r.css("left"),"margin-top":r.css("margin-top"),"margin-bottom":r.css("margin-bottom"),padding:r.css("padding"),background:r.css("background"),height:r.css("height"),width:r.css("width"),"box-sizing":r.css("box-sizing")},r.css({"z-index":1,position:"absolute",width:"100%;","margin-top":0,left:"0.8rem",top:c.position().top+"px",padding:"2.2rem",background:"#fff","box-sizing":"content-box"}),r.css({opacity:0}).animate({opacity:1},1e3),a=e('<div id="ads_dumb"></div>').css(l),r.before(a),i=e('<div style="position:absolute; right:0;top:0;padding:.5em; cursor:pointer;" title="close">x</div>'),r.prepend(i)}),400);var d=function(){o.ads_showing=0,r.css(l).css({opacity:1}),a.remove(),i.remove(),r.off("click.ads_back").off("mouseenter.ads_back").off("mouseleave.ads_back")};o.ads_back_timeout=setTimeout(d,1.5*o.ads_back_timeout_time),r.on("click.ads_back",(function(e){clearTimeout(o.ads_back_timeout),d()})),r.on("mouseenter.ads_back",(function(){clearTimeout(o.ads_back_timeout)})).on("mouseleave.ads_back",(function(){clearTimeout(o.ads_back_timeout),o.ads_back_timeout=setTimeout(d,o.ads_back_timeout_time)}))}}}};document.addEventListener("show_ads_on_code_copy",(function(e){t.code_copy_ads_trigger(jQuery(e.detail.el))})),$document.on("copy keydown",(function(e){var t=function(){var e,t,n=(t=null,window.getSelection?(e=window.getSelection()).rangeCount&&"Caret"!==e.type&&1!==(t=e.getRangeAt(0).commonAncestorContainer).nodeType&&(t=t.parentNode):(e=document.selection)&&"Control"!==e.type&&(t=e.createRange().parentElement()),t);n&&n.closest("pre")&&document.dispatchEvent(new CustomEvent("show_ads_on_code_copy",{detail:{el:n}}))};(e.ctrlKey&&67===e.keyCode||"copy"===e.type)&&t()}))})),jQuery((function(e){window.imgUpload={$form:null,init:function(){this.$form=e("#img_upload_form_js")},popupOnceInit:function(){if(!this.onceinit){this.onceinit=!0;var t=this.$form;t.find(".upload_file_js").on("mouseenter",(function(){this.classList.add("active")})).on("mouseleave",(function(){this.classList.remove("active")})),t.find(".uploaded_imgs_js").on("click","img",(function(){var n=e(this);n.parent().addClass("active").siblings().removeClass("active"),t.find(".url_input_js").data("imgmeta",n.data("imgmeta")).val(this.src).focus()})),t.on("change",".upload_file_input_js",(function(){t.find(".upload_url_input_js").val(""),window.imgUpload.ajaxUpload()})),t.on("click",".upload_by_url_btn_js",window.imgUpload.ajaxUpload),t.on("submit",(function(e){e.preventDefault();var n=t.find(".url_input_js"),o=t.data("textarea")[0],a=n.val(),i=n.data("imgmeta"),s=t.find(".caption_input_js"),r=t.find(".is_border_js").is(":checked"),l=t.find(".img_maxwidth_js input:checked").val();i||(i={width:500});var c=location.href.match(/^https?:\/\/([^.]+[.][^/]+)/)[1];if(a=a.replace(new RegExp("^(https?://)?"+c),"")){var d=["aligncenter"];i.id&&d.push("wp-image-".concat(i.id)),r&&d.push("bordered");var u='<img class="'.concat(d.join(" "),'" src="').concat(a,'" alt="" />'),p={big:800,medium:500,small:300}[l]||800,h=i.width>p?p:i.width;i.width>h&&(u="["+u+"]("+a+")"),s.val()?u='[caption class="aligncenter" width="'+h+'"]'+u+" "+s.val()+"[/caption]":i.width>h&&(u=u.replace('alt=""','alt="" width="'+p+'"')),u="\n"+u+"\n\n",window.insertToTextarea(u,"",o)}n.val("").removeAttr("data-imgmeta"),t.find(".ajax_resp").text(""),window.imgUpload._resetForm(),window.imgUpload._hidePopup()}))}},showPopup:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.popupOnceInit(),e(window).on("paste.imgupload",this.clipboardImagePasteHandler);var o=this.$form;o.show().data("textarea",t),n?o.find(".for_article_js").show():o.find(".for_article_js").hide(),e(document).on("mousedown.upimghide",(function(t){e(t.target).closest(o).length||window.imgUpload._hidePopup()}));var a=o.find(".uploaded_imgs_js");a.is(":empty")&&!a.hasClass("loaded")&&ajaxs("Front_Upfile::load_uploaded_imgs",{noloader:1},(function(e){if(e.ok)return window.imgUpload._addUploadedImgs(e.data)}))},_hidePopup:function(){this.$form.hide(),e(document).off("mousedown.upimghide"),e(window).off("paste.imgupload")},ajaxUpload:function(e){e instanceof File||(e=null);var t=window.imgUpload.$form,n=t.find(".ajax_resp"),o=function(e,t,o){t&&"ok"!==t?n.addClass("error").removeClass("ok").text(e):n.addClass("ok").removeClass("error").text(e),o||(o=8e3),clearTimeout(n[0].hideTm),n[0].hideTm=setTimeout((function(){return n.text("")}),o)};o("loading..."),ajaxs("Front_Upfile::img_upload",{noloader:1,_:e||t},(function(e){e.success?(o(e.data.msg,"ok",2e3),window.imgUpload._resetForm(),window.imgUpload._addUploadedImgs(e.data.images),t.find('img[src="'+e.data.url+'"]').trigger("click")):o(e.data,"error")})).fail((function(e,t,n){o("AJAX request error...","error",4e3)}))},clipboardImagePasteHandler:function(e){if(!(e=e.originalEvent||e).clipboardData)return console.log("paste image ERROR: ev.clipboardData not supported");var t=e.clipboardData.items;if(!t)return console.log("paste image ERROR: no clipboardData.items");for(var n=0;n<t.length;n++)if(-1!==t[n].type.indexOf("image")){var o=t[n].getAsFile(),a=o.type.replace("image/","").toLowerCase(),i=Math.floor(1e6*Math.random()),s="clipboard-image-".concat(i,".").concat(a);o=new File([o],s),window.imgUpload.ajaxUpload(o)}},deleteAttach:function(e){ajaxs("Front_Upfile::del_uploaded_file",{attach_id:e},(function(e){if(e.ok)return window.imgUpload._addUploadedImgs(e.data);myajax.showMsg(e)}))},_addUploadedImgs:function(t){var n=this.$form.find(".uploaded_imgs_js");n.empty().addClass("loaded"),e.each(t,(function(e,t){n.append('<div class="imgwrap"><span class="del" onclick="window.imgUpload.deleteAttach('+t.id+')">✘</span><img src="'+t.url+'" alt="" width="70" data-imgmeta=\''+JSON.stringify(t)+"' /></div>")}))},_resetForm:function(){this.$form.wrap("<form>").closest("form").get(0).reset(),this.$form.unwrap(),this.$form.find(".uploaded_imgs_js > *").removeClass("active")}},window.imgUpload.init()})),document.addEventListener("DOMContentLoaded",(function(){setInterval((function(){var e=document.createElement("link");e.rel="preconnect",e.href=location.origin,e.id="refresh_connect";var t=document.head.querySelector("#refresh_connect");t&&t.remove(),document.head.appendChild(e),document.body.classList.contains("user-adminor")&&console.log("refresh_connect: ".concat(location.origin))}),3e5);var e,t={fileExt:"jpg|jpeg|gif|png|tiff|bmp|webp|avif",hoverTimeout:500},n=new Set,o=function(o){var a=o.target.closest("a");if(a&&a.href&&!a.href.includes("#")&&new RegExp("^".concat(location.origin,"|^//?")).test(a.href)&&!new RegExp(".(".concat(t.fileExt,")")).test(a.href)&&!n.has(a.href)){var i="mouseover"===o.type?t.hoverTimeout:0;!function(t,o){clearTimeout(e),e=setTimeout((function(){var e=document.createElement("link");e.rel="prefetch",e.href=t,document.head.appendChild(e),n.add(e.href),document.body.classList.contains("user-adminor")&&console.log("prefetch Added: ".concat(e.href))}),o)}(a.href,i)}};document.addEventListener("mousedown",o),document.addEventListener("touchstart",o)})),document.addEventListener("DOMContentLoaded",(function(){var e;window.addEventListener("message",(function(t){t.data&&"do_close_reload_opener"===t.data.message&&(clearInterval(e),t.data.close_me&&t.source.close(),t.data.reload_self&&location.reload())})),document.addEventListener("click",(function(t){var n=t.target.closest(".soc_auth_block");if(n){var o=t.target.closest(".link");if(o.classList.contains("binded"))ajaxs("AJAXS_Userauth::unbind_soc_provider",{provider:o.dataset.provider});else{var a,i,s=window.location.href.replace(/#.*/,"").replace(/^(https?:\/\/)(?!dev\.)[^.\/]+\.([^.\/]+\.(?:com|ru|net)\/.*$)/,"$1$2");s=s+(/\?/.test(s)?"&":"?")+"handle_soc_auth="+o.dataset.provider,"registration"===n.dataset.type&&(s+="&registration");var r,l=window.innerWidth;i=window.innerHeight-150-100,(a=l-100-100)>1e3&&(a=1e3),a<400&&(a=400),r=(l-a)/2;var c=window.open(s,"HookahBattle social auth","top=".concat(150,", left=").concat(r,", width=").concat(a,", height=").concat(i,", titlebar=0"));setTimeout((function(){c&&c.close()}),3e5),clearInterval(e),e=setInterval((function(){c.closed&&clearInterval(e),console.log("ask child"),c.postMessage({message:"child_what_should_I_do"},"*")}),500)}}}))})),window.Onsite_Time={humanTime:function(e){var t=[],n=parseInt(e),o={};for(var a in o[js_l10n("г.","js")]=31536e3,o[js_l10n("д.","js")]=86400,o[js_l10n("ч.","js")]=3600,o[js_l10n("м.","js")]=60,o){var i=parseInt(o[a]),s=Math.floor(n/i);s&&(t.push(s+a),n%=i)}return t.join(" ")}},function(){var e=!1;if(window.localStorage){setTimeout((function(){p(),d((function(){d()?p():u("off")})),"focus click keyup scroll touchstart".split(" ").forEach((function(e){window.addEventListener(e,p)})),setInterval(h,1e3*a)}));var t,n,o="onsite_time",a=30,i=1800,s=5;e;var r=/logged-in|wp-admin/.test(document.body.classList.value),l=new Date,c=[l.getFullYear(),("0"+(l.getMonth()+1)).slice(-2),("0"+l.getDate()).slice(-2)].join("-");s=s?6e4*s:6e3;var d=function(){var e,t,n={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(e in n)if(e in document){t=n[e];break}return function(n){return n&&document.addEventListener(t,n),!document[e]}}(),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"on";t=e="on"===e},p=function(e){u("on"),clearTimeout(n),n=setTimeout((function(){u("off")}),s)},h=function(){if(t){var e=localStorage.getItem(o)||"{}";if(void 0===(e=JSON.parse(e))[c]?e[c]=a:e[c]+=a,localStorage.setItem(o,JSON.stringify(e)),r){var n=0;for(var s in e)n+=e[s];n>i&&ajaxs("On_Site_Time::ajaxs_seve_onsite_time",{noloader:1,skip_basic_nonce:1,lsdata:e},(function(e){e&&(localStorage.removeItem(o),_({total_time:e.total}))}))}else{var l=0;for(var d in e)l+=+e[d];_({total_time:l})}}},_=function(e){var t={total_time:e.total_time};document.dispatchEvent(new CustomEvent("onsite_time_tick",{detail:t}))};document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".onsite_time_js");if(e){var t=e.querySelector(".today_wrap_js"),n=e.querySelector(".all_wrap_js"),i=t.querySelector("span"),s=n.querySelector("span"),r=e.dataset.meta,l=function(){var e=localStorage.getItem(o)||"{}";e=JSON.parse(e);var t=(r[c]||0)+(e[c]||0);i.innerText=Onsite_Time.humanTime(t);var n=0;for(var a in e)n+=e[a];void 0!==r.total&&(n+=r.total),s.innerText=Onsite_Time.humanTime(n)};setInterval(l,1e3*a),l()}}))}}();var Loginout=function(){function e(){_classCallCheck(this,e),document.addEventListener("DOMContentLoaded",this.DOMLoaded.bind(this)),e.registerFunctions()}return _createClass(e,[{key:"DOMLoaded",value:function(){jQuery(document).on("ajaxs_start",(function(e,t,n){t.action.match(/Userauth::/)&&"FORM"===t.origin_data.tagName&&jQuery(t.origin_data).css({opacity:.6})})),jQuery(document).on("ajaxs_always",(function(e,t,n,o,a){t.action.match(/Userauth::/)&&"FORM"===t.origin_data.tagName&&jQuery(t.origin_data).css({opacity:1})}));var t=location.hash.match(/#set_newpass_key=(.+)&login=(.+)$/);t&&(location.hash="",kmodal.show(),ajaxs("AJAXS_Userauth::set_newpass_form_html",{restorekey:t[1],login:t[2]},(function(e){return kmodal.content(e)}))),document.addEventListener("click",(function(t){var n=t.target.getAttribute("href")||"";e.callMethodByURL(n)&&t.preventDefault()})),e.callMethodByURL(location.hash)&&(location.hash="")}}],[{key:"callMethodByURL",value:function(e){var t=e.match(/#(doLogout|doLogin|doRegister|doRestorePassword)/);if(t){window[{doLogout:"doLogout",doLogin:"loginForm",doRegister:"registerForm",doRestorePassword:"restorePasswordForm"}[t[1]]]()}return!!t}},{key:"registerFunctions",value:function(){window.loginForm=function(){return kmodal.show(),ajaxs("AJAXS_Userauth::login_form_html",(function(e){kmodal.content(e)})),!1},window.registerForm=function(){return kmodal.show(),ajaxs("AJAXS_Userauth::register_form_html",(function(e){kmodal.content(e)})),!1},window.restorePasswordForm=function(){return kmodal.show(),ajaxs("AJAXS_Userauth::restore_pass_form_html",(function(e){kmodal.content(e)})),!1},window.doLogout=function(){return kmodal.show(),ajaxs("AJAXS_Userauth::logout",(function(e){kmodal.content(e)})),!1},window.loginSubmit=function(e){var t=jQuery(e).find(".reserror_js");return ajaxs("AJAXS_Userauth::auth",e,(function(e){e.ok?kmodal.content(e.data):t.html(e.data).slideDown(200)})),!1},window.registerSubmit=function(e){var t=jQuery(e).find(".reserror_js");return ajaxs("AJAXS_Userauth::register",e,(function(e){e.ok?kmodal.content(e.data):t.html(e.data).slideDown(200)})),!1},window.restorepassSubmit=function(e){var t=jQuery(e).find(".reserror_js");return ajaxs("AJAXS_Userauth::restore_pass",e,(function(e){e.ok?kmodal.content(e.data):t.html(e.data).slideDown(200)})),!1},window.setNewpassSubmit=function(e){var t=jQuery(e).find(".reserror_js");return ajaxs("AJAXS_Userauth::set_newpass",e,(function(e){"object"==typeof e?t.html(e.data).slideDown(200):kmodal.content(e)})),!1}}}]),e}();new Loginout,jQuery((function(e){var t=document.querySelector("#edit_post_editor_js");if(t){var n=e("#ajax_edit_post_content_wrap_js"),o=km.new_el('<span class="edit-post-button" title="Edit Post Content"></span>');o.append(get_svg("edit")),n.before(o);var a=0;o.addEventListener("click",(function(i){if(!a){a=1;var s=e(o),r=n.parent().find("h1"),l=e(t).clone(!0,!0).show(),c=+document.body.getAttribute("class").match(/ (?:page-id|postid)-(\d+)/)[1],d=$window.scrollTop(),u=n.offset().top+n.height();ajaxs("get_post_data",{post_id:c}).always((function(){return a=0})).done((function(t){if(t.success){var o=e([n[0],r[0],s[0]]);o.hide();var a=e('<input type="text" style="width:100%;font-size:130%;margin-bottom:20px;">').val(t.data.post_title),i=$window.height()-50,p=l.val(t.data.post_content).height(n.height()>i?i:n.height()),h=e('<span class="buttons-wrap"/>'),_=e('<button class="button">'+js_l10n("Сохранить","js")+"</button>"),m=e('<button class="button">'+js_l10n("Отменить","js")+"</button>"),f=e('<button class="button">'+js_l10n("Сейвы","js")+"</button>"),v=e('<span class="preview-btn preview_btn_js"><span class="dashicons dashicons-visibility"></span></span>');h.append(_,m,f);var g=e('<div class="edit-post-temp-form">').append(a,p,h),y=function(){g.remove(),o.show(),kmContAutosave.stop(),$window.scrollTop(d)};p.before(v),km.wpkamaAddEditor(g.find(p)),n.before(g),s.hide(),$window.height()-p.height()<150&&$window.scrollTop(p.offset().top);var w=d/u-.05;p.scrollTop(p[0].scrollHeight*w),m.on("click",y),_.on("click",(function(){ajaxs("save_post_data",{post_id:c,post_content:p.val(),post_title:a.val()}).done((function(e){e.success?(n.html(e.data.post_content),r.html(e.data.post_title),y(),kmContAutosave.del_single_data(c)):myajax.showMsg(e)}))}));var b=function(){var e={title:a.val(),content:p.val()};kmContAutosave.save_autosave(c,p,e)};kmContAutosave.run(b),p.on("change",b),f.on("click",(function(e,t){kmContAutosave.show_diff_modal(c,p,b)||myajax.showMsg("No auto-saved content for current post.","error")})),kmContAutosave.changed_data(c,p)&&f.trigger("click")}else myajax.showMsg(t)}))}}))}})),jQuery((function(e){e(document.body).on("change",".comm_condition",(function(){var t=e(this);ajaxs("change_comm_condition",{condition:t.val(),comment_id:t.closest('[id*="comment-"]').attr("id").match(/[0-9]+/)[0]},(function(e){myajax.showMsg(e)})).fail((function(){myajax.showMsg("ERROR: AJAX request","error")}))}))})),jQuery((function(e){var t=e(".pluginfo:first");if(t.length){var n=t.find(".body");window.plugShowChangelog=function(t,n){kmodal.show();var o=function(t){var n=e('<div class="article-text textpadd" style="margin-top:1.5rem;">'+t+"</div>");n.find("script").remove(),kmodal.content(n)};"wp"===n?e.post("https://api.wordpress.org/plugins/info/1.1/",{action:"plugin_information",request:{slug:t,locale:"ru_RU"}},(function(e){o(e.sections.changelog)})):"wp-kama"===n&&e.get("https://api.wp-kama.ru/upserver/info/"+t+"?locale=ru_RU",(function(e){o(e.sections.changelog)}))};var o=n.find("> [needup_pid_js]");if(o.length){var a=myajax.$loader.clone().css({position:"absolute",top:"50%",right:0,left:0,transform:"translateY(-50%)"}).show();n.append(a),ajaxs("ajaxs_update_pluginfo",{noloader:1,post_id:o.attr("needup_pid_js")},(function(e){e&&n.html(e)}),(function(){a.remove()}))}var i=document.querySelector(".content"),s=i.querySelector(".plug-child-list")||i.querySelector("h1"),r=km.new_el('<span data-inf="pluginfo_pholder"/>'),l=function(){window.innerWidth<1300?s.nextElementSibling!==t[0]&&s.after(t[0]):r.after(t[0])};t.before(r),l(),window.addEventListener("resize",l)}})),jQuery((function(e){window.deleteQuestion=function(e){return ajaxs("delete_question",{quest_id:e},(function(e){myajax.showMsg(e)})),!1},window.addQuestion=function(e){return kmodal.show({maxWidth:800}),ajaxs("ajaxs_add_question_form",{noloader:1,quest_id:e},(function(e){if("object"==typeof e)myajax.showMsg(e),kmodal.hide();else{kmodal.content(e);var t=kmodal.$body[0].querySelector("form");km.wpkamaAddEditor(t.querySelector("textarea")),t.addEventListener("submit",(function(e){e.preventDefault(),ajaxs("ajaxs_add_question_handler",t,(function(e){return myajax.showMsg(e)}))}))}})).fail((function(){kmodal.hide()})),!1},document.addEventListener("click",(function(t){if(t.target.classList.contains("com_answer_btn_js")){var n=e(".answer_comm_editor_js:first"),o=t.target,a=e(o),i=a.closest("[id^=li-comment-]"),s=i.find(".answer_comments_js"),r=+i.attr("id").match(/[0-9]+/)[0],l=n.clone(!0,!0),c=e('<span class="button" style="margin-right:.5em;">Комментировать</span>').appendTo(l),d=e('<span class="button">Отменить</span>').appendTo(l),u=km.wpkamaAddEditor(l.find("textarea"));r?(a.hide(),s.append(l),l.show(),u.focus(),d.on("click",(function(){a.show(),l.remove()})),c.on("click",(function(){ajaxs("add_answer_comment",{answer_id:r,answer_text:u.val(),foo:l},(function(t){var n=t.data?t.data:t;t.success?(a.show(),l.remove(),s.append(n.comment_html),s.append(a)):"undefined"!==n&&"unregistered"===n.type?l.find('input[name="user_name"]').length?myajax.showMsg("Заполните обязательные поля","error"):(e('<input type="text" name="user_email" placeholder="Ваше email" value="'+n.comment_author_email+'" />').prependTo(l),e('<input type="text" name="user_name" placeholder="Ваше Имя" value="'+n.comment_author+'" />').prependTo(l).focus(),n.comment_author_email&&n.comment_author?e('<div class="note">Вы не авторизованы, проверьте ваши данные:</div>').prependTo(l):e('<div class="note">Вы не авторизованы, заполните следующие поля:</div>').prependTo(l)):myajax.showMsg(t)}))}))):myajax.showMsg("Ошибка: не удалось определить ID ответа","error")}}))})),window.fhExamples={deleteExample:function(e){ajaxs("AJAXS_FH_Example::delete",{example_id:e})},addEditExample:function(e){kmodal.show({maxWidth:800}),ajaxs("AJAXS_FH_Example::form",Object.assign({noloader:1},e),(function(e){kmodal.content(e);var t=kmodal.$body[0].querySelector("#add_edit_fh_example_form_js");km.wpkamaAddEditor(t.querySelector("textarea"))}))}},document.addEventListener("keydown",(function(e){if("TEXTAREA"===e.target.tagName&&"Tab"===e.code){e.preventDefault();var t=e.target,n=t.selectionStart,o=t.selectionEnd,a=t.value.substring(0,n),i=t.value.substring(n,o),s=t.value.substr(o),r="";if(e.shiftKey){var l=a.substr(a.lastIndexOf("\n")+1),c=/^\s/.test(l);if(c){var d=n-l.length;a=t.value.substring(0,d),i=t.value.substring(d,o)}var u=!1;r=i.replace(/^(\t|[ ]{2,4})/gm,(function(e){return c&&!u&&(u=!0,n-=e.length),o-=e.length,""}))}else n++,i.trim()?r=i.replace(/^/gm,(function(){return o++,"\t"})):(r="\t",o++);t.value=a+r+s,t.setSelectionRange(n,o)}}));